# Solobase Production Environment Configuration
# ==============================================
# This file contains example environment variables for PRODUCTION deployment.
# Copy this to .env and replace all placeholder values with your actual credentials.

# IMPORTANT: Never commit your actual .env file to version control!

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL with SSL enabled (REQUIRED for production)
DATABASE_URL=postgres://username:password@your-db-host:5432/solobase?sslmode=require

# Database type
DATABASE_TYPE=postgres

# For managed PostgreSQL services:
# AWS RDS:      postgres://user:pass@your-instance.region.rds.amazonaws.com:5432/solobase?sslmode=require
# Google Cloud: postgres://user:pass@/solobase?host=/cloudsql/project:region:instance&sslmode=require
# Azure:        postgres://user@server:pass@server.postgres.database.azure.com:5432/solobase?sslmode=require

# =============================================================================
# STORAGE CONFIGURATION (S3/MinIO)
# =============================================================================
# Use S3 or S3-compatible storage for production
STORAGE_TYPE=s3

# AWS S3 (recommended for production)
S3_ENDPOINT=https://s3.amazonaws.com
S3_ACCESS_KEY=YOUR_AWS_ACCESS_KEY_ID
S3_SECRET_KEY=YOUR_AWS_SECRET_ACCESS_KEY
S3_BUCKET=your-production-bucket
S3_REGION=us-east-1
S3_USE_SSL=true

# Alternative: MinIO (self-hosted)
# S3_ENDPOINT=https://minio.yourdomain.com
# S3_USE_SSL=true

# =============================================================================
# EMAIL CONFIGURATION (SMTP)
# =============================================================================
# Use a production email service with TLS enabled
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=YOUR_SENDGRID_API_KEY
SMTP_FROM=noreply@yourdomain.com
SMTP_USE_TLS=true

# Alternative services:
# SendGrid:   smtp.sendgrid.net:587
# Mailgun:    smtp.mailgun.org:587
# AWS SES:    email-smtp.us-east-1.amazonaws.com:587
# Postmark:   smtp.postmarkapp.com:587

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Server port (use standard ports behind a reverse proxy)
PORT=8080

# Security secrets - MUST be changed!
# Generate using: openssl rand -base64 32
JWT_SECRET=REPLACE_WITH_32_PLUS_CHARACTER_RANDOM_STRING
SESSION_SECRET=REPLACE_WITH_ANOTHER_32_PLUS_CHARACTER_RANDOM_STRING

# Example secure secrets (DO NOT USE THESE - generate your own):
# JWT_SECRET=a3d8f7e2b9c1d4f6a8e7b3c9d1f4e8a7b2c5d9f3e6a1b8c4d7f2e9a6b3c8d5
# SESSION_SECRET=c9d1f4e8a7b2c5d9f3e6a1b8c4d7f2e9a6b3c8d5a3d8f7e2b9c1d4f6a8e7b3

# Logging (reduce verbosity in production)
LOG_LEVEL=INFO

# Feature flags
ENABLE_SIGNUP=false           # Disable if you want invite-only
ENABLE_API=true

# Application ID
APP_ID=solobase

# Environment
ENVIRONMENT=production

# =============================================================================
# ADMIN ACCOUNT
# =============================================================================
# Initial admin credentials (used only on first startup)
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=GENERATE_A_SECURE_PASSWORD_HERE

# CRITICAL: Change admin password immediately after first login!
# Use a password manager to generate a strong password (20+ characters)

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Specify EXACT allowed origins (never use wildcards in production)
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Add all domains that need to access your API
# Examples:
# - Main site: https://yourdomain.com
# - Admin panel: https://admin.yourdomain.com
# - Mobile app: https://app.yourdomain.com

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=30

# Adjust based on your traffic patterns
# Lower values provide better DDoS protection
# Higher values needed for high-traffic applications

# =============================================================================
# OPTIONAL: MONITORING & OBSERVABILITY
# =============================================================================
# Uncomment and configure if you use these services

# Sentry (Error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# New Relic (Application monitoring)
# NEW_RELIC_LICENSE_KEY=your-license-key
# NEW_RELIC_APP_NAME=Solobase

# DataDog (Infrastructure monitoring)
# DD_API_KEY=your-datadog-api-key

# =============================================================================
# SECURITY HEADERS (Optional but recommended)
# =============================================================================
# Configure your reverse proxy (nginx, cloudflare, etc.) with:
# - X-Frame-Options: DENY
# - X-Content-Type-Options: nosniff
# - X-XSS-Protection: 1; mode=block
# - Strict-Transport-Security: max-age=31536000; includeSubDomains
# - Content-Security-Policy: default-src 'self'

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================
# Before going live, verify:
# ✓ All placeholder values replaced with actual credentials
# ✓ JWT_SECRET is a secure random string (32+ characters)
# ✓ SESSION_SECRET is a different secure random string (32+ characters)
# ✓ ADMIN_PASSWORD is strong and unique
# ✓ Database SSL is enabled (sslmode=require)
# ✓ S3 SSL is enabled (S3_USE_SSL=true)
# ✓ SMTP TLS is enabled (SMTP_USE_TLS=true)
# ✓ CORS origins are specific (no wildcards)
# ✓ Rate limiting is configured appropriately
# ✓ LOG_LEVEL is set to INFO or WARN
# ✓ ENABLE_SIGNUP is set appropriately for your use case
# ✓ All secrets are stored securely (use secret management service)
# ✓ .env file is added to .gitignore
# ✓ Regular backups are configured
# ✓ SSL/TLS certificates are valid
# ✓ Reverse proxy is configured with security headers
# ✓ Monitoring and alerting are set up
# ✓ Database backups are automated
# ✓ You have tested the deployment in a staging environment

# =============================================================================
# SECRET MANAGEMENT RECOMMENDATIONS
# =============================================================================
# For production deployments, consider using:
# - AWS Secrets Manager
# - Google Cloud Secret Manager
# - Azure Key Vault
# - HashiCorp Vault
# - Doppler
# - 1Password for infrastructure teams

# Never store production secrets in:
# - Version control (git)
# - CI/CD logs
# - Application logs
# - Error messages
# - Client-side code
