import{S as J,i as M,s as U,v as w,w as E,o as _,p,x as O,y as N,z as j,A as k,m as z,u as L,q as A,r as R,d as g,B as F,J as W,D as X,b as q,c as h,E as y,U as T,C as b,e as v,f as $,g as V,h as H,j as S,t as B,k as x,n as Y}from"./BDqP8p-g.js";import"./IHki7fMi.js";import{D as Z}from"./BqQCH2Kx.js";import{g as K,a as P}from"./CgU5AtxT.js";import{I as G}from"./DEeCOqOg.js";function tt(l){let t;const n=l[2].default,e=z(n,l,l[3],null);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||s&8)&&L(e,n,o,o[3],t?R(n,o[3],s,null):A(o[3]),null)},i(o){t||(p(e,o),t=!0)},o(o){_(e,o),t=!1},d(o){e&&e.d(o)}}}function et(l){let t,n;const e=[{name:"file-json"},l[1],{iconNode:l[0]}];let o={$$slots:{default:[tt]},$$scope:{ctx:l}};for(let s=0;s<e.length;s+=1)o=w(o,e[s]);return t=new G({props:o}),{c(){j(t.$$.fragment)},l(s){N(t.$$.fragment,s)},m(s,a){O(t,s,a),n=!0},p(s,[a]){const r=a&3?K(e,[e[0],a&2&&P(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(r.$$scope={dirty:a,ctx:s}),t.$set(r)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){E(t,s)}}}function nt(l,t,n){let{$$slots:e={},$$scope:o}=t;const s=[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}],["polyline",{points:"14 2 14 8 20 8"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"}]];return l.$$set=a=>{n(1,t=w(w({},t),k(a))),"$$scope"in a&&n(3,o=a.$$scope)},t=k(t),[s,t,e,o]}class st extends J{constructor(t){super(),M(this,t,nt,et,U,{})}}function ot(l){let t;const n=l[2].default,e=z(n,l,l[3],null);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,s){e&&e.m(o,s),t=!0},p(o,s){e&&e.p&&(!t||s&8)&&L(e,n,o,o[3],t?R(n,o[3],s,null):A(o[3]),null)},i(o){t||(p(e,o),t=!0)},o(o){_(e,o),t=!1},d(o){e&&e.d(o)}}}function at(l){let t,n;const e=[{name:"file-spreadsheet"},l[1],{iconNode:l[0]}];let o={$$slots:{default:[ot]},$$scope:{ctx:l}};for(let s=0;s<e.length;s+=1)o=w(o,e[s]);return t=new G({props:o}),{c(){j(t.$$.fragment)},l(s){N(t.$$.fragment,s)},m(s,a){O(t,s,a),n=!0},p(s,[a]){const r=a&3?K(e,[e[0],a&2&&P(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(r.$$scope={dirty:a,ctx:s}),t.$set(r)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){E(t,s)}}}function lt(l,t,n){let{$$slots:e={},$$scope:o}=t;const s=[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}],["polyline",{points:"14 2 14 8 20 8"}],["path",{d:"M8 13h2"}],["path",{d:"M8 17h2"}],["path",{d:"M14 13h2"}],["path",{d:"M14 17h2"}]];return l.$$set=a=>{n(1,t=w(w({},t),k(a))),"$$scope"in a&&n(3,o=a.$$scope)},t=k(t),[s,t,e,o]}class rt extends J{constructor(t){super(),M(this,t,lt,at,U,{})}}function it(l,t="export.csv"){if(!l||l.length===0){console.warn("No data to export");return}const n=Object.keys(l[0]),e=[n.join(","),...l.map(s=>n.map(a=>{const r=s[a];if(r==null)return"";if(typeof r=="object")return`"${JSON.stringify(r).replace(/"/g,'""')}"`;const u=String(r);return u.includes(",")||u.includes(`
`)||u.includes('"')?`"${u.replace(/"/g,'""')}"`:u}).join(","))].join(`
`),o=new Blob([e],{type:"text/csv;charset=utf-8;"});Q(o,t)}function ft(l,t="export.json"){if(!l||l.length===0){console.warn("No data to export");return}const n=JSON.stringify(l,null,2),e=new Blob([n],{type:"application/json;charset=utf-8;"});Q(e,t)}function Q(l,t){const n=window.URL.createObjectURL(l),e=document.createElement("a");e.href=n,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(n)}function ct(l){return l.map(t=>{const n={};function e(o,s=""){for(const a in o)if(o.hasOwnProperty(a)){const r=o[a],u=s?`${s}.${a}`:a;r==null?n[u]="":typeof r=="object"&&!Array.isArray(r)&&!(r instanceof Date)?e(r,u):Array.isArray(r)?n[u]=JSON.stringify(r):r instanceof Date?n[u]=r.toISOString():n[u]=r}}return e(t),n})}function I(l){let t,n,e,o,s,a,r,u,f,c,d;return e=new rt({props:{size:16}}),r=new st({props:{size:16}}),{c(){t=S("div"),n=S("button"),j(e.$$.fragment),o=B(`
				Export as CSV`),s=x(),a=S("button"),j(r.$$.fragment),u=B(`
				Export as JSON`),this.h()},l(i){t=v(i,"DIV",{class:!0});var m=$(t);n=v(m,"BUTTON",{class:!0});var C=$(n);N(e.$$.fragment,C),o=V(C,`
				Export as CSV`),C.forEach(g),s=H(m),a=v(m,"BUTTON",{class:!0});var D=$(a);N(r.$$.fragment,D),u=V(D,`
				Export as JSON`),D.forEach(g),m.forEach(g),this.h()},h(){b(n,"class","dropdown-item svelte-ss2tu"),b(a,"class","dropdown-item svelte-ss2tu"),b(t,"class","dropdown-menu svelte-ss2tu")},m(i,m){q(i,t,m),h(t,n),O(e,n,null),h(n,o),h(t,s),h(t,a),O(r,a,null),h(a,u),f=!0,c||(d=[y(n,"click",T(l[2])),y(a,"click",T(l[3]))],c=!0)},p:Y,i(i){f||(p(e.$$.fragment,i),p(r.$$.fragment,i),f=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&g(t),E(e),E(r),c=!1,F(d)}}}function ut(l){let t,n,e,o,s,a,r,u;e=new Z({props:{size:16}});let f=l[1]&&!l[0]&&I(l);return{c(){t=S("div"),n=S("button"),j(e.$$.fragment),o=B(`
		Export`),s=x(),f&&f.c(),this.h()},l(c){t=v(c,"DIV",{class:!0});var d=$(t);n=v(d,"BUTTON",{class:!0,title:!0});var i=$(n);N(e.$$.fragment,i),o=V(i,`
		Export`),i.forEach(g),s=H(d),f&&f.l(d),d.forEach(g),this.h()},h(){b(n,"class","export-btn svelte-ss2tu"),n.disabled=l[0],b(n,"title","Export data"),b(t,"class","export-dropdown svelte-ss2tu")},m(c,d){q(c,t,d),h(t,n),O(e,n,null),h(n,o),h(t,s),f&&f.m(t,null),a=!0,r||(u=[y(window,"click",l[5]),y(n,"click",T(l[4]))],r=!0)},p(c,[d]){(!a||d&1)&&(n.disabled=c[0]),c[1]&&!c[0]?f?(f.p(c,d),d&3&&p(f,1)):(f=I(c),f.c(),p(f,1),f.m(t,null)):f&&(W(),_(f,1,1,()=>{f=null}),X())},i(c){a||(p(e.$$.fragment,c),p(f),a=!0)},o(c){_(e.$$.fragment,c),_(f),a=!1},d(c){c&&g(t),E(e),f&&f.d(),r=!1,F(u)}}}function dt(l,t,n){let{data:e=[]}=t,{filename:o="export"}=t,{flatten:s=!1}=t,{disabled:a=!1}=t,r=!1;function u(){const i=new Date().toISOString().split("T")[0],m=s?ct(e):e;it(m,`${o}_${i}.csv`),n(1,r=!1)}function f(){const i=new Date().toISOString().split("T")[0];ft(e,`${o}_${i}.json`),n(1,r=!1)}function c(){n(1,r=!r)}function d(i){i.target.closest(".export-dropdown")||n(1,r=!1)}return l.$$set=i=>{"data"in i&&n(6,e=i.data),"filename"in i&&n(7,o=i.filename),"flatten"in i&&n(8,s=i.flatten),"disabled"in i&&n(0,a=i.disabled)},[a,r,u,f,c,d,e,o,s]}class bt extends J{constructor(t){super(),M(this,t,dt,ut,U,{data:6,filename:7,flatten:8,disabled:0})}}export{bt as E};
