import{S as wl,i as Dl,s as Il,d as _,w as et,B as Ft,o as Ce,p as ve,C as o,D as Rt,b as oe,c as e,x as tt,E as B,e as i,f as v,F as I,h as g,y as lt,g as ee,G as al,j as c,k as E,z as at,t as te,H as Ll,n as ft,a as Ne,I as Lt,J as zt,K as X,L as It,M as yl,N as sl,O as nl}from"../chunks/BDqP8p-g.js";import{e as st}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{P as Nl}from"../chunks/CFcgidKw.js";import{A as Vl}from"../chunks/CEm0GgIa.js";import{D as xl}from"../chunks/K7Y1xrmR.js";import{C as kl}from"../chunks/D4tGolQ7.js";import{P as Pl}from"../chunks/CuWZIf1d.js";import{T as Ol}from"../chunks/CLM56qV-.js";import{F as Al}from"../chunks/DqeN2d6x.js";function rl(a,t,l){const u=a.slice();return u[44]=t[l],u}function ol(a,t,l){const u=a.slice();return u[44]=t[l],u}function il(a,t,l){const u=a.slice();return u[49]=t[l],u}function cl(a,t,l){const u=a.slice();return u[44]=t[l],u}function Ml(a){let t,l,u=st(a[8]),f=[];for(let p=0;p<u.length;p+=1)f[p]=_l(il(a,u,p));const h=p=>Ce(f[p],1,1,()=>{f[p]=null});return{c(){t=c("div");for(let p=0;p<f.length;p+=1)f[p].c();this.h()},l(p){t=i(p,"DIV",{class:!0});var n=v(t);for(let s=0;s<f.length;s+=1)f[s].l(n);n.forEach(_),this.h()},h(){o(t,"class","grid gap-4")},m(p,n){oe(p,t,n);for(let s=0;s<f.length;s+=1)f[s]&&f[s].m(t,null);l=!0},p(p,n){if(n[0]&35072){u=st(p[8]);let s;for(s=0;s<u.length;s+=1){const b=il(p,u,s);f[s]?(f[s].p(b,n),ve(f[s],1)):(f[s]=_l(b),f[s].c(),ve(f[s],1),f[s].m(t,null))}for(zt(),s=u.length;s<f.length;s+=1)h(s);Rt()}},i(p){if(!l){for(let n=0;n<u.length;n+=1)ve(f[n]);l=!0}},o(p){f=f.filter(Boolean);for(let n=0;n<f.length;n+=1)Ce(f[n]);l=!1},d(p){p&&_(t),Lt(f,p)}}}function ql(a){let t,l='<p class="text-base-content/60">No templates found</p>';return{c(){t=c("div"),t.innerHTML=l,this.h()},l(u){t=i(u,"DIV",{class:!0,"data-svelte-h":!0}),I(t)!=="svelte-1djd9qf"&&(t.innerHTML=l),this.h()},h(){o(t,"class","card bg-base-200 p-12 text-center")},m(u,f){oe(u,t,f)},p:ft,i:ft,o:ft,d(u){u&&_(t)}}}function Bl(a){let t,l,u,f,h,p;return l=new Vl({props:{class:"w-4 h-4"}}),{c(){t=c("div"),at(l.$$.fragment),u=E(),f=c("span"),h=te(a[2]),this.h()},l(n){t=i(n,"DIV",{class:!0});var s=v(t);lt(l.$$.fragment,s),u=g(s),f=i(s,"SPAN",{});var b=v(f);h=ee(b,a[2]),b.forEach(_),s.forEach(_),this.h()},h(){o(t,"class","alert alert-error")},m(n,s){oe(n,t,s),tt(l,t,null),e(t,u),e(t,f),e(f,h),p=!0},p(n,s){(!p||s[0]&4)&&Ne(h,n[2])},i(n){p||(ve(l.$$.fragment,n),p=!0)},o(n){Ce(l.$$.fragment,n),p=!1},d(n){n&&_(t),et(l)}}}function Hl(a){let t,l='<span class="loading loading-spinner loading-lg"></span>';return{c(){t=c("div"),t.innerHTML=l,this.h()},l(u){t=i(u,"DIV",{class:!0,"data-svelte-h":!0}),I(t)!=="svelte-1qtpo6m"&&(t.innerHTML=l),this.h()},h(){o(t,"class","flex justify-center py-12")},m(u,f){oe(u,t,f)},p:ft,i:ft,o:ft,d(u){u&&_(t)}}}function ul(a){let t,l,u=a[49].priority+"",f;return{c(){t=c("span"),l=te("Priority: "),f=te(u),this.h()},l(h){t=i(h,"SPAN",{class:!0});var p=v(t);l=ee(p,"Priority: "),f=ee(p,u),p.forEach(_),this.h()},h(){o(t,"class","badge badge-outline badge-sm")},m(h,p){oe(h,t,p),e(t,l),e(t,f)},p(h,p){p[0]&256&&u!==(u=h[49].priority+"")&&Ne(f,u)},d(h){h&&_(t)}}}function dl(a){let t,l="Inactive";return{c(){t=c("span"),t.textContent=l,this.h()},l(u){t=i(u,"SPAN",{class:!0,"data-svelte-h":!0}),I(t)!=="svelte-au0bdy"&&(t.textContent=l),this.h()},h(){o(t,"class","badge badge-ghost badge-sm")},m(u,f){oe(u,t,f)},d(u){u&&_(t)}}}function fl(a){let t,l,u,f,h,p="Condition:",n,s,b,r=a[49].condition_formula+"",d,C,w,J,D,W,le;u=new Al({props:{class:"w-4 h-4 text-warning"}}),J=new kl({props:{class:"w-3 h-3"}});function ne(){return a[24](a[49])}return{c(){t=c("div"),l=c("div"),at(u.$$.fragment),f=E(),h=c("span"),h.textContent=p,n=E(),s=c("div"),b=c("code"),d=te(r),C=E(),w=c("button"),at(J.$$.fragment),this.h()},l(y){t=i(y,"DIV",{class:!0});var G=v(t);l=i(G,"DIV",{class:!0});var V=v(l);lt(u.$$.fragment,V),f=g(V),h=i(V,"SPAN",{class:!0,"data-svelte-h":!0}),I(h)!=="svelte-gn36cf"&&(h.textContent=p),V.forEach(_),n=g(G),s=i(G,"DIV",{class:!0});var A=v(s);b=i(A,"CODE",{});var O=v(b);d=ee(O,r),O.forEach(_),C=g(A),w=i(A,"BUTTON",{class:!0});var be=v(w);lt(J.$$.fragment,be),be.forEach(_),A.forEach(_),G.forEach(_),this.h()},h(){o(h,"class","font-semibold text-sm"),o(l,"class","flex items-center gap-2 mb-1"),o(w,"class","btn btn-ghost btn-xs absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"),o(s,"class","bg-base-100 rounded-lg p-3 font-mono text-sm relative group"),o(t,"class","mb-3")},m(y,G){oe(y,t,G),e(t,l),tt(u,l,null),e(l,f),e(l,h),e(t,n),e(t,s),e(s,b),e(b,d),e(s,C),e(s,w),tt(J,w,null),D=!0,W||(le=B(w,"click",ne),W=!0)},p(y,G){a=y,(!D||G[0]&256)&&r!==(r=a[49].condition_formula+"")&&Ne(d,r)},i(y){D||(ve(u.$$.fragment,y),ve(J.$$.fragment,y),D=!0)},o(y){Ce(u.$$.fragment,y),Ce(J.$$.fragment,y),D=!1},d(y){y&&_(t),et(u),et(J),W=!1,le()}}}function pl(a){let t,l,u="Required Variables:",f,h,p=st(a[49].variables.required),n=[];for(let s=0;s<p.length;s+=1)n[s]=hl(cl(a,p,s));return{c(){t=c("div"),l=c("span"),l.textContent=u,f=E(),h=c("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){t=i(s,"DIV",{class:!0});var b=v(t);l=i(b,"SPAN",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-4l068o"&&(l.textContent=u),f=g(b),h=i(b,"DIV",{class:!0});var r=v(h);for(let d=0;d<n.length;d+=1)n[d].l(r);r.forEach(_),b.forEach(_),this.h()},h(){o(l,"class","text-sm font-semibold"),o(h,"class","flex flex-wrap gap-1"),o(t,"class","flex items-center gap-2 mt-3")},m(s,b){oe(s,t,b),e(t,l),e(t,f),e(t,h);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(h,null)},p(s,b){if(b[0]&256){p=st(s[49].variables.required);let r;for(r=0;r<p.length;r+=1){const d=cl(s,p,r);n[r]?n[r].p(d,b):(n[r]=hl(d),n[r].c(),n[r].m(h,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=p.length}},d(s){s&&_(t),Lt(n,s)}}}function hl(a){let t,l=a[44]+"",u,f;return{c(){t=c("span"),u=te(l),f=E(),this.h()},l(h){t=i(h,"SPAN",{class:!0});var p=v(t);u=ee(p,l),f=g(p),p.forEach(_),this.h()},h(){o(t,"class","badge badge-sm badge-outline")},m(h,p){oe(h,t,p),e(t,u),e(t,f)},p(h,p){p[0]&256&&l!==(l=h[44]+"")&&Ne(u,l)},d(h){h&&_(t)}}}function _l(a){var ye,Fe;let t,l,u,f,h,p,n=a[49].display_name+"",s,b,r,d=a[49].category+"",C,w,J,D,W,le,ne=a[49].description+"",y,G,V,A,O,be,re,j="Price Formula:",R,ie,K,Te=a[49].price_formula+"",F,De,z,fe,M,Q,ae,se,x,pe,Ie,Y,S,Ve,L,T,m,k=a[49].priority>0&&ul(a),N=!a[49].is_active&&dl();O=new xl({props:{class:"w-4 h-4 text-primary"}}),fe=new kl({props:{class:"w-3 h-3"}});function ce(){return a[23](a[49])}let H=a[49].condition_formula&&fl(a),P=((Fe=(ye=a[49].variables)==null?void 0:ye.required)==null?void 0:Fe.length)>0&&pl(a);pe=new Pl({props:{class:"w-4 h-4"}});function je(){return a[25](a[49])}S=new Ol({props:{class:"w-4 h-4"}});function me(){return a[26](a[49])}return{c(){t=c("div"),l=c("div"),u=c("div"),f=c("div"),h=c("div"),p=c("h3"),s=te(n),b=E(),r=c("span"),C=te(d),J=E(),k&&k.c(),D=E(),N&&N.c(),W=E(),le=c("p"),y=te(ne),G=E(),V=c("div"),A=c("div"),at(O.$$.fragment),be=E(),re=c("span"),re.textContent=j,R=E(),ie=c("div"),K=c("code"),F=te(Te),De=E(),z=c("button"),at(fe.$$.fragment),M=E(),H&&H.c(),Q=E(),P&&P.c(),ae=E(),se=c("div"),x=c("button"),at(pe.$$.fragment),Ie=E(),Y=c("button"),at(S.$$.fragment),Ve=E(),this.h()},l(Z){t=i(Z,"DIV",{class:!0});var U=v(t);l=i(U,"DIV",{class:!0});var Be=v(l);u=i(Be,"DIV",{class:!0});var ge=v(u);f=i(ge,"DIV",{class:!0});var ke=v(f);h=i(ke,"DIV",{class:!0});var Le=v(h);p=i(Le,"H3",{class:!0});var we=v(p);s=ee(we,n),we.forEach(_),b=g(Le),r=i(Le,"SPAN",{class:!0});var Oe=v(r);C=ee(Oe,d),Oe.forEach(_),J=g(Le),k&&k.l(Le),D=g(Le),N&&N.l(Le),Le.forEach(_),W=g(ke),le=i(ke,"P",{class:!0});var pt=v(le);y=ee(pt,ne),pt.forEach(_),G=g(ke),V=i(ke,"DIV",{class:!0});var Re=v(V);A=i(Re,"DIV",{class:!0});var Ee=v(A);lt(O.$$.fragment,Ee),be=g(Ee),re=i(Ee,"SPAN",{class:!0,"data-svelte-h":!0}),I(re)!=="svelte-1spnj2d"&&(re.textContent=j),Ee.forEach(_),R=g(Re),ie=i(Re,"DIV",{class:!0});var ze=v(ie);K=i(ze,"CODE",{});var Ae=v(K);F=ee(Ae,Te),Ae.forEach(_),De=g(ze),z=i(ze,"BUTTON",{class:!0});var ht=v(z);lt(fe.$$.fragment,ht),ht.forEach(_),ze.forEach(_),Re.forEach(_),M=g(ke),H&&H.l(ke),Q=g(ke),P&&P.l(ke),ke.forEach(_),ae=g(ge),se=i(ge,"DIV",{class:!0});var Je=v(se);x=i(Je,"BUTTON",{class:!0});var ue=v(x);lt(pe.$$.fragment,ue),ue.forEach(_),Ie=g(Je),Y=i(Je,"BUTTON",{class:!0});var Me=v(Y);lt(S.$$.fragment,Me),Me.forEach(_),Je.forEach(_),ge.forEach(_),Be.forEach(_),Ve=g(U),U.forEach(_),this.h()},h(){o(p,"class","text-xl font-semibold"),o(r,"class",w="badge "+Tl(a[49].category)+" badge-sm"),o(h,"class","flex items-center gap-3 mb-2"),o(le,"class","text-base-content/60 mb-4"),o(re,"class","font-semibold text-sm"),o(A,"class","flex items-center gap-2 mb-1"),o(z,"class","btn btn-ghost btn-xs absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"),o(ie,"class","bg-base-100 rounded-lg p-3 font-mono text-sm relative group"),o(V,"class","mb-3"),o(f,"class","flex-1"),o(x,"class","btn btn-ghost btn-sm"),o(Y,"class","btn btn-ghost btn-sm text-error"),o(se,"class","flex gap-2"),o(u,"class","flex justify-between items-start"),o(l,"class","card-body"),o(t,"class","card bg-base-200")},m(Z,U){oe(Z,t,U),e(t,l),e(l,u),e(u,f),e(f,h),e(h,p),e(p,s),e(h,b),e(h,r),e(r,C),e(h,J),k&&k.m(h,null),e(h,D),N&&N.m(h,null),e(f,W),e(f,le),e(le,y),e(f,G),e(f,V),e(V,A),tt(O,A,null),e(A,be),e(A,re),e(V,R),e(V,ie),e(ie,K),e(K,F),e(ie,De),e(ie,z),tt(fe,z,null),e(f,M),H&&H.m(f,null),e(f,Q),P&&P.m(f,null),e(u,ae),e(u,se),e(se,x),tt(pe,x,null),e(se,Ie),e(se,Y),tt(S,Y,null),e(t,Ve),L=!0,T||(m=[B(z,"click",ce),B(x,"click",je),B(Y,"click",me)],T=!0)},p(Z,U){var Be,ge;a=Z,(!L||U[0]&256)&&n!==(n=a[49].display_name+"")&&Ne(s,n),(!L||U[0]&256)&&d!==(d=a[49].category+"")&&Ne(C,d),(!L||U[0]&256&&w!==(w="badge "+Tl(a[49].category)+" badge-sm"))&&o(r,"class",w),a[49].priority>0?k?k.p(a,U):(k=ul(a),k.c(),k.m(h,D)):k&&(k.d(1),k=null),a[49].is_active?N&&(N.d(1),N=null):N||(N=dl(),N.c(),N.m(h,null)),(!L||U[0]&256)&&ne!==(ne=a[49].description+"")&&Ne(y,ne),(!L||U[0]&256)&&Te!==(Te=a[49].price_formula+"")&&Ne(F,Te),a[49].condition_formula?H?(H.p(a,U),U[0]&256&&ve(H,1)):(H=fl(a),H.c(),ve(H,1),H.m(f,Q)):H&&(zt(),Ce(H,1,1,()=>{H=null}),Rt()),((ge=(Be=a[49].variables)==null?void 0:Be.required)==null?void 0:ge.length)>0?P?P.p(a,U):(P=pl(a),P.c(),P.m(f,null)):P&&(P.d(1),P=null)},i(Z){L||(ve(O.$$.fragment,Z),ve(fe.$$.fragment,Z),ve(H),ve(pe.$$.fragment,Z),ve(S.$$.fragment,Z),L=!0)},o(Z){Ce(O.$$.fragment,Z),Ce(fe.$$.fragment,Z),Ce(H),Ce(pe.$$.fragment,Z),Ce(S.$$.fragment,Z),L=!1},d(Z){Z&&_(t),k&&k.d(),N&&N.d(),et(O),et(fe),H&&H.d(),P&&P.d(),et(pe),et(S),T=!1,Ft(m)}}}function vl(a){var Zt,$t,el,tl;let t,l,u,f=a[4]?"Edit Pricing Template":"Create New Pricing Template",h,p,n,s,b,r,d='<span class="label-text">Template Name</span>',C,w,J,D,W,le='<span class="label-text">Display Name</span>',ne,y,G,V,A,O,be='<span class="label-text">Category</span>',re,j,R,ie="Standard",K,Te="Discount",F,De="Dynamic",z,fe="Subscription",M,Q="Shipping",ae,se="Bundle",x,pe="Complex",Ie,Y,S,Ve='<span class="label-text">Priority</span> <span class="label-text-alt">Higher priority templates are evaluated first</span>',L,T,m,k,N,ce='<span class="label-text">Description</span>',H,P,je,me,ye,Fe='<span class="label-text">Price Formula</span> <span class="label-text-alt">Required</span>',Z,U,Be,ge,ke='<span class="label-text-alt">Use JavaScript-like syntax. Variables: base_price, quantity, tax_rate, etc.</span>',Le,we,Oe,pt='<span class="label-text">Condition Formula</span> <span class="label-text-alt">Optional - when this template should apply</span>',Re,Ee,ze,Ae,ht='<span class="label-text-alt">Leave empty to always apply. Use boolean expressions.</span>',Je,ue,Me,Jt='<span class="label-text">Required Variables</span>',Nt,qe,xe,Vt,Pe,He,Xt="Required",Se,Gt="Optional",xt,Xe,Kt="Add",Pt,bt,Ot,ot,Ge,Ke,At,nt,Qt="Active",Mt,Qe,We,Wt="Cancel",qt,Ye,_t=a[4]?"Update":"Create",mt,Bt,Ht,it,St,Yt,he=(($t=(Zt=a[5].variables)==null?void 0:Zt.required)==null?void 0:$t.length)>0&&bl(a),_e=((tl=(el=a[5].variables)==null?void 0:el.optional)==null?void 0:tl.length)>0&&gl(a);return{c(){t=c("div"),l=c("div"),u=c("h3"),h=te(f),p=E(),n=c("div"),s=c("div"),b=c("div"),r=c("label"),r.innerHTML=d,C=E(),w=c("input"),J=E(),D=c("div"),W=c("label"),W.innerHTML=le,ne=E(),y=c("input"),G=E(),V=c("div"),A=c("div"),O=c("label"),O.innerHTML=be,re=E(),j=c("select"),R=c("option"),R.textContent=ie,K=c("option"),K.textContent=Te,F=c("option"),F.textContent=De,z=c("option"),z.textContent=fe,M=c("option"),M.textContent=Q,ae=c("option"),ae.textContent=se,x=c("option"),x.textContent=pe,Ie=E(),Y=c("div"),S=c("label"),S.innerHTML=Ve,L=E(),T=c("input"),m=E(),k=c("div"),N=c("label"),N.innerHTML=ce,H=E(),P=c("textarea"),je=E(),me=c("div"),ye=c("label"),ye.innerHTML=Fe,Z=E(),U=c("textarea"),Be=E(),ge=c("label"),ge.innerHTML=ke,Le=E(),we=c("div"),Oe=c("label"),Oe.innerHTML=pt,Re=E(),Ee=c("textarea"),ze=E(),Ae=c("label"),Ae.innerHTML=ht,Je=E(),ue=c("div"),Me=c("label"),Me.innerHTML=Jt,Nt=E(),qe=c("div"),xe=c("input"),Vt=E(),Pe=c("select"),He=c("option"),He.textContent=Xt,Se=c("option"),Se.textContent=Gt,xt=E(),Xe=c("button"),Xe.textContent=Kt,Pt=E(),he&&he.c(),bt=E(),_e&&_e.c(),Ot=E(),ot=c("div"),Ge=c("label"),Ke=c("input"),At=E(),nt=c("span"),nt.textContent=Qt,Mt=E(),Qe=c("div"),We=c("button"),We.textContent=Wt,qt=E(),Ye=c("button"),mt=te(_t),Bt=te(" Template"),Ht=E(),it=c("div"),this.h()},l(q){t=i(q,"DIV",{class:!0});var $=v(t);l=i($,"DIV",{class:!0});var Ue=v(l);u=i(Ue,"H3",{class:!0});var vt=v(u);h=ee(vt,f),vt.forEach(_),p=g(Ue),n=i(Ue,"DIV",{class:!0});var de=v(n);s=i(de,"DIV",{class:!0});var rt=v(s);b=i(rt,"DIV",{class:!0});var gt=v(b);r=i(gt,"LABEL",{class:!0,"data-svelte-h":!0}),I(r)!=="svelte-8961l"&&(r.innerHTML=d),C=g(gt),w=i(gt,"INPUT",{type:!0,class:!0,placeholder:!0}),gt.forEach(_),J=g(rt),D=i(rt,"DIV",{class:!0});var Et=v(D);W=i(Et,"LABEL",{class:!0,"data-svelte-h":!0}),I(W)!=="svelte-116q0jt"&&(W.innerHTML=le),ne=g(Et),y=i(Et,"INPUT",{type:!0,class:!0,placeholder:!0}),Et.forEach(_),rt.forEach(_),G=g(de),V=i(de,"DIV",{class:!0});var Tt=v(V);A=i(Tt,"DIV",{class:!0});var Ct=v(A);O=i(Ct,"LABEL",{class:!0,"data-svelte-h":!0}),I(O)!=="svelte-bq58do"&&(O.innerHTML=be),re=g(Ct),j=i(Ct,"SELECT",{class:!0});var Ze=v(j);R=i(Ze,"OPTION",{"data-svelte-h":!0}),I(R)!=="svelte-5niz6y"&&(R.textContent=ie),K=i(Ze,"OPTION",{"data-svelte-h":!0}),I(K)!=="svelte-1na3y1i"&&(K.textContent=Te),F=i(Ze,"OPTION",{"data-svelte-h":!0}),I(F)!=="svelte-icilco"&&(F.textContent=De),z=i(Ze,"OPTION",{"data-svelte-h":!0}),I(z)!=="svelte-h38atm"&&(z.textContent=fe),M=i(Ze,"OPTION",{"data-svelte-h":!0}),I(M)!=="svelte-1b8huzi"&&(M.textContent=Q),ae=i(Ze,"OPTION",{"data-svelte-h":!0}),I(ae)!=="svelte-11tydhi"&&(ae.textContent=se),x=i(Ze,"OPTION",{"data-svelte-h":!0}),I(x)!=="svelte-l5rjfy"&&(x.textContent=pe),Ze.forEach(_),Ct.forEach(_),Ie=g(Tt),Y=i(Tt,"DIV",{class:!0});var yt=v(Y);S=i(yt,"LABEL",{class:!0,"data-svelte-h":!0}),I(S)!=="svelte-1a2colm"&&(S.innerHTML=Ve),L=g(yt),T=i(yt,"INPUT",{type:!0,class:!0,placeholder:!0,min:!0,max:!0}),yt.forEach(_),Tt.forEach(_),m=g(de),k=i(de,"DIV",{class:!0});var kt=v(k);N=i(kt,"LABEL",{class:!0,"data-svelte-h":!0}),I(N)!=="svelte-1u7x5he"&&(N.innerHTML=ce),H=g(kt),P=i(kt,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),v(P).forEach(_),kt.forEach(_),je=g(de),me=i(de,"DIV",{class:!0});var ct=v(me);ye=i(ct,"LABEL",{class:!0,"data-svelte-h":!0}),I(ye)!=="svelte-ezzktq"&&(ye.innerHTML=Fe),Z=g(ct),U=i(ct,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),v(U).forEach(_),Be=g(ct),ge=i(ct,"LABEL",{class:!0,"data-svelte-h":!0}),I(ge)!=="svelte-gc49wn"&&(ge.innerHTML=ke),ct.forEach(_),Le=g(de),we=i(de,"DIV",{class:!0});var ut=v(we);Oe=i(ut,"LABEL",{class:!0,"data-svelte-h":!0}),I(Oe)!=="svelte-nb57l7"&&(Oe.innerHTML=pt),Re=g(ut),Ee=i(ut,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),v(Ee).forEach(_),ze=g(ut),Ae=i(ut,"LABEL",{class:!0,"data-svelte-h":!0}),I(Ae)!=="svelte-mwvoy3"&&(Ae.innerHTML=ht),ut.forEach(_),Je=g(de),ue=i(de,"DIV",{class:!0});var $e=v(ue);Me=i($e,"LABEL",{class:!0,"data-svelte-h":!0}),I(Me)!=="svelte-1qvx02c"&&(Me.innerHTML=Jt),Nt=g($e),qe=i($e,"DIV",{class:!0});var dt=v(qe);xe=i(dt,"INPUT",{type:!0,class:!0,placeholder:!0}),Vt=g(dt),Pe=i(dt,"SELECT",{class:!0});var Ut=v(Pe);He=i(Ut,"OPTION",{"data-svelte-h":!0}),I(He)!=="svelte-1w1pdil"&&(He.textContent=Xt),Se=i(Ut,"OPTION",{"data-svelte-h":!0}),I(Se)!=="svelte-g5a93l"&&(Se.textContent=Gt),Ut.forEach(_),xt=g(dt),Xe=i(dt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(Xe)!=="svelte-odlgfp"&&(Xe.textContent=Kt),dt.forEach(_),Pt=g($e),he&&he.l($e),bt=g($e),_e&&_e.l($e),$e.forEach(_),Ot=g(de),ot=i(de,"DIV",{class:!0});var ll=v(ot);Ge=i(ll,"LABEL",{class:!0});var wt=v(Ge);Ke=i(wt,"INPUT",{type:!0,class:!0}),At=g(wt),nt=i(wt,"SPAN",{class:!0,"data-svelte-h":!0}),I(nt)!=="svelte-1hb4gz9"&&(nt.textContent=Qt),wt.forEach(_),ll.forEach(_),de.forEach(_),Mt=g(Ue),Qe=i(Ue,"DIV",{class:!0});var Dt=v(Qe);We=i(Dt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(We)!=="svelte-10e5bw0"&&(We.textContent=Wt),qt=g(Dt),Ye=i(Dt,"BUTTON",{class:!0});var jt=v(Ye);mt=ee(jt,_t),Bt=ee(jt," Template"),jt.forEach(_),Dt.forEach(_),Ue.forEach(_),Ht=g($),it=i($,"DIV",{class:!0}),v(it).forEach(_),$.forEach(_),this.h()},h(){o(u,"class","font-bold text-lg mb-4"),o(r,"class","label"),o(w,"type","text"),o(w,"class","input input-bordered"),o(w,"placeholder","e.g., volume_discount"),o(b,"class","form-control"),o(W,"class","label"),o(y,"type","text"),o(y,"class","input input-bordered"),o(y,"placeholder","e.g., Volume Discount"),o(D,"class","form-control"),o(s,"class","grid grid-cols-2 gap-4"),o(O,"class","label"),R.__value="standard",X(R,R.__value),K.__value="discount",X(K,K.__value),F.__value="dynamic",X(F,F.__value),z.__value="subscription",X(z,z.__value),M.__value="shipping",X(M,M.__value),ae.__value="bundle",X(ae,ae.__value),x.__value="complex",X(x,x.__value),o(j,"class","select select-bordered"),a[5].category===void 0&&sl(()=>a[29].call(j)),o(A,"class","form-control"),o(S,"class","label"),o(T,"type","number"),o(T,"class","input input-bordered"),o(T,"placeholder","0"),o(T,"min","0"),o(T,"max","1000"),o(Y,"class","form-control"),o(V,"class","grid grid-cols-2 gap-4"),o(N,"class","label"),o(P,"class","textarea textarea-bordered"),o(P,"placeholder","Describe what this template does..."),o(P,"rows","2"),o(k,"class","form-control"),o(ye,"class","label"),o(U,"class","textarea textarea-bordered font-mono text-sm"),o(U,"placeholder","e.g., base_price * quantity * (quantity >= 100 ? 0.8 : 1.0)"),o(U,"rows","3"),o(ge,"class","label"),o(me,"class","form-control"),o(Oe,"class","label"),o(Ee,"class","textarea textarea-bordered font-mono text-sm"),o(Ee,"placeholder","e.g., quantity >= 10 && is_member == true"),o(Ee,"rows","2"),o(Ae,"class","label"),o(we,"class","form-control"),o(Me,"class","label"),o(xe,"type","text"),o(xe,"class","input input-bordered flex-1"),o(xe,"placeholder","Variable name..."),He.__value=!0,X(He,He.__value),Se.__value=!1,X(Se,Se.__value),o(Pe,"class","select select-bordered"),a[7]===void 0&&sl(()=>a[36].call(Pe)),o(Xe,"class","btn btn-primary"),o(qe,"class","flex gap-2 mb-2"),o(ue,"class","form-control"),o(Ke,"type","checkbox"),o(Ke,"class","checkbox"),o(nt,"class","label-text"),o(Ge,"class","label cursor-pointer justify-start gap-3"),o(ot,"class","form-control"),o(n,"class","space-y-4"),o(We,"class","btn btn-ghost"),o(Ye,"class","btn btn-primary"),o(Qe,"class","modal-action"),o(l,"class","modal-box max-w-4xl"),o(it,"class","modal-backdrop"),o(t,"class","modal modal-open")},m(q,$){oe(q,t,$),e(t,l),e(l,u),e(u,h),e(l,p),e(l,n),e(n,s),e(s,b),e(b,r),e(b,C),e(b,w),X(w,a[5].name),e(s,J),e(s,D),e(D,W),e(D,ne),e(D,y),X(y,a[5].display_name),e(n,G),e(n,V),e(V,A),e(A,O),e(A,re),e(A,j),e(j,R),e(j,K),e(j,F),e(j,z),e(j,M),e(j,ae),e(j,x),It(j,a[5].category,!0),e(V,Ie),e(V,Y),e(Y,S),e(Y,L),e(Y,T),X(T,a[5].priority),e(n,m),e(n,k),e(k,N),e(k,H),e(k,P),X(P,a[5].description),e(n,je),e(n,me),e(me,ye),e(me,Z),e(me,U),X(U,a[5].price_formula),e(me,Be),e(me,ge),e(n,Le),e(n,we),e(we,Oe),e(we,Re),e(we,Ee),X(Ee,a[5].condition_formula),e(we,ze),e(we,Ae),e(n,Je),e(n,ue),e(ue,Me),e(ue,Nt),e(ue,qe),e(qe,xe),X(xe,a[6]),e(qe,Vt),e(qe,Pe),e(Pe,He),e(Pe,Se),It(Pe,a[7],!0),e(qe,xt),e(qe,Xe),e(ue,Pt),he&&he.m(ue,null),e(ue,bt),_e&&_e.m(ue,null),e(n,Ot),e(n,ot),e(ot,Ge),e(Ge,Ke),Ke.checked=a[5].is_active,e(Ge,At),e(Ge,nt),e(l,Mt),e(l,Qe),e(Qe,We),e(Qe,qt),e(Qe,Ye),e(Ye,mt),e(Ye,Bt),e(t,Ht),e(t,it),St||(Yt=[B(w,"input",a[27]),B(y,"input",a[28]),B(j,"change",a[29]),B(T,"input",a[30]),B(P,"input",a[31]),B(U,"input",a[32]),B(Ee,"input",a[33]),B(xe,"input",a[34]),B(xe,"keydown",a[35]),B(Pe,"change",a[36]),B(Xe,"click",a[12]),B(Ke,"change",a[39]),B(We,"click",a[40]),B(Ye,"click",a[14]),B(it,"click",a[41])],St=!0)},p(q,$){var Ue,vt,de,rt;$[0]&16&&f!==(f=q[4]?"Edit Pricing Template":"Create New Pricing Template")&&Ne(h,f),$[0]&32&&w.value!==q[5].name&&X(w,q[5].name),$[0]&32&&y.value!==q[5].display_name&&X(y,q[5].display_name),$[0]&32&&It(j,q[5].category),$[0]&32&&yl(T.value)!==q[5].priority&&X(T,q[5].priority),$[0]&32&&X(P,q[5].description),$[0]&32&&X(U,q[5].price_formula),$[0]&32&&X(Ee,q[5].condition_formula),$[0]&64&&xe.value!==q[6]&&X(xe,q[6]),$[0]&128&&It(Pe,q[7]),((vt=(Ue=q[5].variables)==null?void 0:Ue.required)==null?void 0:vt.length)>0?he?he.p(q,$):(he=bl(q),he.c(),he.m(ue,bt)):he&&(he.d(1),he=null),((rt=(de=q[5].variables)==null?void 0:de.optional)==null?void 0:rt.length)>0?_e?_e.p(q,$):(_e=gl(q),_e.c(),_e.m(ue,null)):_e&&(_e.d(1),_e=null),$[0]&32&&(Ke.checked=q[5].is_active),$[0]&16&&_t!==(_t=q[4]?"Update":"Create")&&Ne(mt,_t)},d(q){q&&_(t),he&&he.d(),_e&&_e.d(),St=!1,Ft(Yt)}}}function bl(a){let t,l,u="Required:",f,h,p=st(a[5].variables.required),n=[];for(let s=0;s<p.length;s+=1)n[s]=ml(ol(a,p,s));return{c(){t=c("div"),l=c("span"),l.textContent=u,f=E(),h=c("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){t=i(s,"DIV",{class:!0});var b=v(t);l=i(b,"SPAN",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-1h1ln0h"&&(l.textContent=u),f=g(b),h=i(b,"DIV",{class:!0});var r=v(h);for(let d=0;d<n.length;d+=1)n[d].l(r);r.forEach(_),b.forEach(_),this.h()},h(){o(l,"class","text-sm font-semibold"),o(h,"class","flex flex-wrap gap-2 mt-1"),o(t,"class","mb-2")},m(s,b){oe(s,t,b),e(t,l),e(t,f),e(t,h);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(h,null)},p(s,b){if(b[0]&8224){p=st(s[5].variables.required);let r;for(r=0;r<p.length;r+=1){const d=ol(s,p,r);n[r]?n[r].p(d,b):(n[r]=ml(d),n[r].c(),n[r].m(h,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=p.length}},d(s){s&&_(t),Lt(n,s)}}}function ml(a){let t,l=a[44]+"",u,f,h,p="×",n,s,b;function r(){return a[37](a[44])}return{c(){t=c("span"),u=te(l),f=E(),h=c("button"),h.textContent=p,n=E(),this.h()},l(d){t=i(d,"SPAN",{class:!0});var C=v(t);u=ee(C,l),f=g(C),h=i(C,"BUTTON",{"data-svelte-h":!0}),I(h)!=="svelte-19zn271"&&(h.textContent=p),n=g(C),C.forEach(_),this.h()},h(){o(t,"class","badge badge-primary gap-2")},m(d,C){oe(d,t,C),e(t,u),e(t,f),e(t,h),e(t,n),s||(b=B(h,"click",r),s=!0)},p(d,C){a=d,C[0]&32&&l!==(l=a[44]+"")&&Ne(u,l)},d(d){d&&_(t),s=!1,b()}}}function gl(a){let t,l,u="Optional:",f,h,p=st(a[5].variables.optional),n=[];for(let s=0;s<p.length;s+=1)n[s]=El(rl(a,p,s));return{c(){t=c("div"),l=c("span"),l.textContent=u,f=E(),h=c("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){t=i(s,"DIV",{});var b=v(t);l=i(b,"SPAN",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-1shrh80"&&(l.textContent=u),f=g(b),h=i(b,"DIV",{class:!0});var r=v(h);for(let d=0;d<n.length;d+=1)n[d].l(r);r.forEach(_),b.forEach(_),this.h()},h(){o(l,"class","text-sm font-semibold"),o(h,"class","flex flex-wrap gap-2 mt-1")},m(s,b){oe(s,t,b),e(t,l),e(t,f),e(t,h);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(h,null)},p(s,b){if(b[0]&8224){p=st(s[5].variables.optional);let r;for(r=0;r<p.length;r+=1){const d=rl(s,p,r);n[r]?n[r].p(d,b):(n[r]=El(d),n[r].c(),n[r].m(h,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=p.length}},d(s){s&&_(t),Lt(n,s)}}}function El(a){let t,l=a[44]+"",u,f,h,p="×",n,s,b;function r(){return a[38](a[44])}return{c(){t=c("span"),u=te(l),f=E(),h=c("button"),h.textContent=p,n=E(),this.h()},l(d){t=i(d,"SPAN",{class:!0});var C=v(t);u=ee(C,l),f=g(C),h=i(C,"BUTTON",{"data-svelte-h":!0}),I(h)!=="svelte-czo5lu"&&(h.textContent=p),n=g(C),C.forEach(_),this.h()},h(){o(t,"class","badge badge-ghost gap-2")},m(d,C){oe(d,t,C),e(t,u),e(t,f),e(t,h),e(t,n),s||(b=B(h,"click",r),s=!0)},p(d,C){a=d,C[0]&32&&l!==(l=a[44]+"")&&Ne(u,l)},d(d){d&&_(t),s=!1,b()}}}function Sl(a){let t,l,u,f='<h1 class="text-3xl font-bold">Pricing Templates</h1> <p class="text-base-content/60 mt-2">Manage reusable pricing formulas and conditions</p>',h,p,n,s,b,r,d,C,w,J,D,W,le,ne,y,G,V,A,O,be,re,j,R,ie,K,Te,F,De,z,fe,M,Q,ae,se,x,pe,Ie;n=new Nl({props:{class:"w-4 h-4 mr-2"}});const Y=[Hl,Bl,ql,Ml],S=[];function Ve(T,m){return T[1]?0:T[2]?1:T[8].length===0?2:3}M=Ve(a),Q=S[M]=Y[M](a);let L=(a[3]||a[4])&&vl(a);return{c(){t=c("div"),l=c("div"),u=c("div"),u.innerHTML=f,h=E(),p=c("button"),at(n.$$.fragment),s=te(`
			Create Template`),b=E(),r=c("div"),d=c("button"),C=te("All"),J=E(),D=c("button"),W=te("Standard"),ne=E(),y=c("button"),G=te("Discount"),A=E(),O=c("button"),be=te("Dynamic"),j=E(),R=c("button"),ie=te("Subscription"),Te=E(),F=c("button"),De=te("Shipping"),fe=E(),Q.c(),ae=E(),L&&L.c(),se=al(),this.h()},l(T){t=i(T,"DIV",{class:!0});var m=v(t);l=i(m,"DIV",{class:!0});var k=v(l);u=i(k,"DIV",{"data-svelte-h":!0}),I(u)!=="svelte-17y2u1o"&&(u.innerHTML=f),h=g(k),p=i(k,"BUTTON",{class:!0});var N=v(p);lt(n.$$.fragment,N),s=ee(N,`
			Create Template`),N.forEach(_),k.forEach(_),b=g(m),r=i(m,"DIV",{class:!0});var ce=v(r);d=i(ce,"BUTTON",{class:!0});var H=v(d);C=ee(H,"All"),H.forEach(_),J=g(ce),D=i(ce,"BUTTON",{class:!0});var P=v(D);W=ee(P,"Standard"),P.forEach(_),ne=g(ce),y=i(ce,"BUTTON",{class:!0});var je=v(y);G=ee(je,"Discount"),je.forEach(_),A=g(ce),O=i(ce,"BUTTON",{class:!0});var me=v(O);be=ee(me,"Dynamic"),me.forEach(_),j=g(ce),R=i(ce,"BUTTON",{class:!0});var ye=v(R);ie=ee(ye,"Subscription"),ye.forEach(_),Te=g(ce),F=i(ce,"BUTTON",{class:!0});var Fe=v(F);De=ee(Fe,"Shipping"),Fe.forEach(_),ce.forEach(_),fe=g(m),Q.l(m),m.forEach(_),ae=g(T),L&&L.l(T),se=al(),this.h()},h(){o(p,"class","btn btn-primary"),o(l,"class","flex justify-between items-center mb-6"),o(d,"class",w="tab "+(a[0]==="all"?"tab-active":"")),o(D,"class",le="tab "+(a[0]==="standard"?"tab-active":"")),o(y,"class",V="tab "+(a[0]==="discount"?"tab-active":"")),o(O,"class",re="tab "+(a[0]==="dynamic"?"tab-active":"")),o(R,"class",K="tab "+(a[0]==="subscription"?"tab-active":"")),o(F,"class",z="tab "+(a[0]==="shipping"?"tab-active":"")),o(r,"class","tabs tabs-boxed mb-6"),o(t,"class","container mx-auto p-6")},m(T,m){oe(T,t,m),e(t,l),e(l,u),e(l,h),e(l,p),tt(n,p,null),e(p,s),e(t,b),e(t,r),e(r,d),e(d,C),e(r,J),e(r,D),e(D,W),e(r,ne),e(r,y),e(y,G),e(r,A),e(r,O),e(O,be),e(r,j),e(r,R),e(R,ie),e(r,Te),e(r,F),e(F,De),e(t,fe),S[M].m(t,null),oe(T,ae,m),L&&L.m(T,m),oe(T,se,m),x=!0,pe||(Ie=[B(p,"click",a[10]),B(d,"click",a[17]),B(D,"click",a[18]),B(y,"click",a[19]),B(O,"click",a[20]),B(R,"click",a[21]),B(F,"click",a[22])],pe=!0)},p(T,m){(!x||m[0]&1&&w!==(w="tab "+(T[0]==="all"?"tab-active":"")))&&o(d,"class",w),(!x||m[0]&1&&le!==(le="tab "+(T[0]==="standard"?"tab-active":"")))&&o(D,"class",le),(!x||m[0]&1&&V!==(V="tab "+(T[0]==="discount"?"tab-active":"")))&&o(y,"class",V),(!x||m[0]&1&&re!==(re="tab "+(T[0]==="dynamic"?"tab-active":"")))&&o(O,"class",re),(!x||m[0]&1&&K!==(K="tab "+(T[0]==="subscription"?"tab-active":"")))&&o(R,"class",K),(!x||m[0]&1&&z!==(z="tab "+(T[0]==="shipping"?"tab-active":"")))&&o(F,"class",z);let k=M;M=Ve(T),M===k?S[M].p(T,m):(zt(),Ce(S[k],1,1,()=>{S[k]=null}),Rt(),Q=S[M],Q?Q.p(T,m):(Q=S[M]=Y[M](T),Q.c()),ve(Q,1),Q.m(t,null)),T[3]||T[4]?L?L.p(T,m):(L=vl(T),L.c(),L.m(se.parentNode,se)):L&&(L.d(1),L=null)},i(T){x||(ve(n.$$.fragment,T),ve(Q),x=!0)},o(T){Ce(n.$$.fragment,T),Ce(Q),x=!1},d(T){T&&(_(t),_(ae),_(se)),et(n),S[M].d(),L&&L.d(T),pe=!1,Ft(Ie)}}}function Tl(a){switch(a){case"standard":return"badge-primary";case"discount":return"badge-success";case"dynamic":return"badge-warning";case"subscription":return"badge-info";case"shipping":return"badge-secondary";default:return"badge-ghost"}}function Cl(a){navigator.clipboard.writeText(a)}function Ul(a,t,l){let u,f=[],h=!0,p=null,n=!1,s=!1,b=null,r="all",d={name:"",display_name:"",description:"",price_formula:"",condition_formula:"",category:"standard",priority:0,variables:{},is_active:!0},C="",w=!0;Ll(()=>{J()});async function J(){l(1,h=!0),l(2,p=null);try{const m=await fetch("/api/ext/products/pricing-templates");if(!m.ok)throw new Error("Failed to load templates");l(16,f=await m.json())}catch(m){l(2,p=m.message)}finally{l(1,h=!1)}}function D(){l(5,d={name:"",display_name:"",description:"",price_formula:"",condition_formula:"",category:"standard",priority:0,variables:{},is_active:!0}),l(6,C=""),l(7,w=!0)}function W(){D(),l(3,n=!0)}function le(m){b=m,l(5,d={...m}),d.variables||l(5,d.variables={},d),l(4,s=!0)}function ne(){var m;C&&!((m=d.variables.required)!=null&&m.includes(C))&&(d.variables.required||l(5,d.variables.required=[],d),d.variables.optional||l(5,d.variables.optional=[],d),w?l(5,d.variables.required=[...d.variables.required,C],d):l(5,d.variables.optional=[...d.variables.optional,C],d),l(5,d),l(6,C=""))}function y(m,k){k?l(5,d.variables.required=d.variables.required.filter(N=>N!==m),d):l(5,d.variables.optional=d.variables.optional.filter(N=>N!==m),d),l(5,d)}async function G(){try{const m=s?`/api/products/pricing-templates/${b.id}`:"/api/ext/products/pricing-templates";if(!(await fetch(m,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok)throw new Error("Failed to save template");await J(),l(3,n=!1),l(4,s=!1),D()}catch(m){alert("Error saving template: "+m.message)}}async function V(m){if(confirm(`Are you sure you want to delete the template "${m.display_name}"?`))try{if(!(await fetch(`/api/products/pricing-templates/${m.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete template");await J()}catch(k){alert("Error deleting template: "+k.message)}}const A=()=>l(0,r="all"),O=()=>l(0,r="standard"),be=()=>l(0,r="discount"),re=()=>l(0,r="dynamic"),j=()=>l(0,r="subscription"),R=()=>l(0,r="shipping"),ie=m=>Cl(m.price_formula),K=m=>Cl(m.condition_formula),Te=m=>le(m),F=m=>V(m);function De(){d.name=this.value,l(5,d)}function z(){d.display_name=this.value,l(5,d)}function fe(){d.category=nl(this),l(5,d)}function M(){d.priority=yl(this.value),l(5,d)}function Q(){d.description=this.value,l(5,d)}function ae(){d.price_formula=this.value,l(5,d)}function se(){d.condition_formula=this.value,l(5,d)}function x(){C=this.value,l(6,C)}const pe=m=>m.key==="Enter"&&ne();function Ie(){w=nl(this),l(7,w)}const Y=m=>y(m,!0),S=m=>y(m,!1);function Ve(){d.is_active=this.checked,l(5,d)}const L=()=>{l(3,n=!1),l(4,s=!1),D()},T=()=>{l(3,n=!1),l(4,s=!1),D()};return a.$$.update=()=>{a.$$.dirty[0]&65537&&l(8,u=r==="all"?f:f.filter(m=>m.category===r))},[r,h,p,n,s,d,C,w,u,D,W,le,ne,y,G,V,f,A,O,be,re,j,R,ie,K,Te,F,De,z,fe,M,Q,ae,se,x,pe,Ie,Y,S,Ve,L,T]}class Yl extends wl{constructor(t){super(),Dl(this,t,Ul,Sl,Il,{},null,[-1,-1])}}export{Yl as component};
