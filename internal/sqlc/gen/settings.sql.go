// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: settings.sql

package db

import (
	"context"

	"github.com/suppers-ai/solobase/internal/pkg/apptime"
)

const createSetting = `-- name: CreateSetting :one

INSERT INTO sys_settings (id, key, value, type, created_at, updated_at)
VALUES (?, ?, ?, ?, ?, ?)
RETURNING id, "key", value, type, created_at, updated_at, deleted_at
`

type CreateSettingParams struct {
	ID        string  `json:"id"`
	Key       string  `json:"key"`
	Value     *string `json:"value"`
	Type      *string `json:"type"`
	CreatedAt string  `json:"created_at"`
	UpdatedAt string  `json:"updated_at"`
}

// Settings queries
func (q *Queries) CreateSetting(ctx context.Context, arg CreateSettingParams) (SysSetting, error) {
	row := q.db.QueryRowContext(ctx, createSetting,
		arg.ID,
		arg.Key,
		arg.Value,
		arg.Type,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i SysSetting
	err := row.Scan(
		&i.ID,
		&i.Key,
		&i.Value,
		&i.Type,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const getSettingByID = `-- name: GetSettingByID :one
SELECT id, "key", value, type, created_at, updated_at, deleted_at FROM sys_settings WHERE id = ? AND deleted_at IS NULL LIMIT 1
`

func (q *Queries) GetSettingByID(ctx context.Context, id string) (SysSetting, error) {
	row := q.db.QueryRowContext(ctx, getSettingByID, id)
	var i SysSetting
	err := row.Scan(
		&i.ID,
		&i.Key,
		&i.Value,
		&i.Type,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const getSettingByKey = `-- name: GetSettingByKey :one
SELECT id, "key", value, type, created_at, updated_at, deleted_at FROM sys_settings WHERE key = ? AND deleted_at IS NULL LIMIT 1
`

func (q *Queries) GetSettingByKey(ctx context.Context, key string) (SysSetting, error) {
	row := q.db.QueryRowContext(ctx, getSettingByKey, key)
	var i SysSetting
	err := row.Scan(
		&i.ID,
		&i.Key,
		&i.Value,
		&i.Type,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const hardDeleteSetting = `-- name: HardDeleteSetting :exec
DELETE FROM sys_settings WHERE id = ?
`

func (q *Queries) HardDeleteSetting(ctx context.Context, id string) error {
	_, err := q.db.ExecContext(ctx, hardDeleteSetting, id)
	return err
}

const listSettings = `-- name: ListSettings :many
SELECT id, "key", value, type, created_at, updated_at, deleted_at FROM sys_settings WHERE deleted_at IS NULL ORDER BY key
`

func (q *Queries) ListSettings(ctx context.Context) ([]SysSetting, error) {
	rows, err := q.db.QueryContext(ctx, listSettings)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SysSetting{}
	for rows.Next() {
		var i SysSetting
		if err := rows.Scan(
			&i.ID,
			&i.Key,
			&i.Value,
			&i.Type,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.DeletedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listSettingsByType = `-- name: ListSettingsByType :many
SELECT id, "key", value, type, created_at, updated_at, deleted_at FROM sys_settings WHERE type = ? AND deleted_at IS NULL ORDER BY key
`

func (q *Queries) ListSettingsByType(ctx context.Context, type_ *string) ([]SysSetting, error) {
	rows, err := q.db.QueryContext(ctx, listSettingsByType, type_)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SysSetting{}
	for rows.Next() {
		var i SysSetting
		if err := rows.Scan(
			&i.ID,
			&i.Key,
			&i.Value,
			&i.Type,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.DeletedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const softDeleteSetting = `-- name: SoftDeleteSetting :exec
UPDATE sys_settings SET deleted_at = ?, updated_at = ? WHERE id = ?
`

type SoftDeleteSettingParams struct {
	DeletedAt apptime.NullTime `json:"deleted_at"`
	UpdatedAt string           `json:"updated_at"`
	ID        string           `json:"id"`
}

func (q *Queries) SoftDeleteSetting(ctx context.Context, arg SoftDeleteSettingParams) error {
	_, err := q.db.ExecContext(ctx, softDeleteSetting, arg.DeletedAt, arg.UpdatedAt, arg.ID)
	return err
}

const softDeleteSettingByKey = `-- name: SoftDeleteSettingByKey :exec
UPDATE sys_settings SET deleted_at = ?, updated_at = ? WHERE key = ?
`

type SoftDeleteSettingByKeyParams struct {
	DeletedAt apptime.NullTime `json:"deleted_at"`
	UpdatedAt string           `json:"updated_at"`
	Key       string           `json:"key"`
}

func (q *Queries) SoftDeleteSettingByKey(ctx context.Context, arg SoftDeleteSettingByKeyParams) error {
	_, err := q.db.ExecContext(ctx, softDeleteSettingByKey, arg.DeletedAt, arg.UpdatedAt, arg.Key)
	return err
}

const updateSetting = `-- name: UpdateSetting :exec
UPDATE sys_settings SET value = ?, type = ?, updated_at = ? WHERE id = ? AND deleted_at IS NULL
`

type UpdateSettingParams struct {
	Value     *string `json:"value"`
	Type      *string `json:"type"`
	UpdatedAt string  `json:"updated_at"`
	ID        string  `json:"id"`
}

func (q *Queries) UpdateSetting(ctx context.Context, arg UpdateSettingParams) error {
	_, err := q.db.ExecContext(ctx, updateSetting,
		arg.Value,
		arg.Type,
		arg.UpdatedAt,
		arg.ID,
	)
	return err
}

const updateSettingByKey = `-- name: UpdateSettingByKey :exec
UPDATE sys_settings SET value = ?, type = ?, updated_at = ? WHERE key = ? AND deleted_at IS NULL
`

type UpdateSettingByKeyParams struct {
	Value     *string `json:"value"`
	Type      *string `json:"type"`
	UpdatedAt string  `json:"updated_at"`
	Key       string  `json:"key"`
}

func (q *Queries) UpdateSettingByKey(ctx context.Context, arg UpdateSettingByKeyParams) error {
	_, err := q.db.ExecContext(ctx, updateSettingByKey,
		arg.Value,
		arg.Type,
		arg.UpdatedAt,
		arg.Key,
	)
	return err
}

const upsertSetting = `-- name: UpsertSetting :exec
INSERT INTO sys_settings (id, key, value, type, created_at, updated_at)
VALUES (?, ?, ?, ?, ?, ?)
ON CONFLICT(key) DO UPDATE SET value = excluded.value, type = excluded.type, updated_at = excluded.updated_at
`

type UpsertSettingParams struct {
	ID        string  `json:"id"`
	Key       string  `json:"key"`
	Value     *string `json:"value"`
	Type      *string `json:"type"`
	CreatedAt string  `json:"created_at"`
	UpdatedAt string  `json:"updated_at"`
}

func (q *Queries) UpsertSetting(ctx context.Context, arg UpsertSettingParams) error {
	_, err := q.db.ExecContext(ctx, upsertSetting,
		arg.ID,
		arg.Key,
		arg.Value,
		arg.Type,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	return err
}
