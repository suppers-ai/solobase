// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: ext_legalpages.sql

package db

import (
	"context"
)

const archivePublishedDocumentsByType = `-- name: ArchivePublishedDocumentsByType :exec
UPDATE ext_legalpages_legal_documents SET status = 'archived', updated_at = CURRENT_TIMESTAMP WHERE document_type = ? AND status = 'published'
`

func (q *Queries) ArchivePublishedDocumentsByType(ctx context.Context, documentType string) error {
	_, err := q.db.ExecContext(ctx, archivePublishedDocumentsByType, documentType)
	return err
}

const countLegalDocuments = `-- name: CountLegalDocuments :one
SELECT COUNT(*) FROM ext_legalpages_legal_documents
`

func (q *Queries) CountLegalDocuments(ctx context.Context) (int64, error) {
	row := q.db.QueryRowContext(ctx, countLegalDocuments)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countLegalDocumentsByType = `-- name: CountLegalDocumentsByType :one
SELECT COUNT(*) FROM ext_legalpages_legal_documents WHERE document_type = ?
`

func (q *Queries) CountLegalDocumentsByType(ctx context.Context, documentType string) (int64, error) {
	row := q.db.QueryRowContext(ctx, countLegalDocumentsByType, documentType)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createLegalDocument = `-- name: CreateLegalDocument :one

INSERT INTO ext_legalpages_legal_documents (
    id, document_type, title, content, version, status, created_by
) VALUES (?, ?, ?, ?, ?, ?, ?)
RETURNING id, document_type, title, content, version, status, created_at, updated_at, created_by
`

type CreateLegalDocumentParams struct {
	ID           string  `json:"id"`
	DocumentType string  `json:"document_type"`
	Title        string  `json:"title"`
	Content      *string `json:"content"`
	Version      int64   `json:"version"`
	Status       *string `json:"status"`
	CreatedBy    *string `json:"created_by"`
}

// Legal Document queries
func (q *Queries) CreateLegalDocument(ctx context.Context, arg CreateLegalDocumentParams) (ExtLegalpagesLegalDocument, error) {
	row := q.db.QueryRowContext(ctx, createLegalDocument,
		arg.ID,
		arg.DocumentType,
		arg.Title,
		arg.Content,
		arg.Version,
		arg.Status,
		arg.CreatedBy,
	)
	var i ExtLegalpagesLegalDocument
	err := row.Scan(
		&i.ID,
		&i.DocumentType,
		&i.Title,
		&i.Content,
		&i.Version,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.CreatedBy,
	)
	return i, err
}

const deleteLegalDocument = `-- name: DeleteLegalDocument :exec
DELETE FROM ext_legalpages_legal_documents WHERE id = ?
`

func (q *Queries) DeleteLegalDocument(ctx context.Context, id string) error {
	_, err := q.db.ExecContext(ctx, deleteLegalDocument, id)
	return err
}

const getDocumentByTypeAndVersion = `-- name: GetDocumentByTypeAndVersion :one
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents
WHERE document_type = ? AND version = ?
LIMIT 1
`

type GetDocumentByTypeAndVersionParams struct {
	DocumentType string `json:"document_type"`
	Version      int64  `json:"version"`
}

func (q *Queries) GetDocumentByTypeAndVersion(ctx context.Context, arg GetDocumentByTypeAndVersionParams) (ExtLegalpagesLegalDocument, error) {
	row := q.db.QueryRowContext(ctx, getDocumentByTypeAndVersion, arg.DocumentType, arg.Version)
	var i ExtLegalpagesLegalDocument
	err := row.Scan(
		&i.ID,
		&i.DocumentType,
		&i.Title,
		&i.Content,
		&i.Version,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.CreatedBy,
	)
	return i, err
}

const getLatestDocumentByType = `-- name: GetLatestDocumentByType :one
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents
WHERE document_type = ?
ORDER BY version DESC
LIMIT 1
`

func (q *Queries) GetLatestDocumentByType(ctx context.Context, documentType string) (ExtLegalpagesLegalDocument, error) {
	row := q.db.QueryRowContext(ctx, getLatestDocumentByType, documentType)
	var i ExtLegalpagesLegalDocument
	err := row.Scan(
		&i.ID,
		&i.DocumentType,
		&i.Title,
		&i.Content,
		&i.Version,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.CreatedBy,
	)
	return i, err
}

const getLegalDocumentByID = `-- name: GetLegalDocumentByID :one
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents WHERE id = ? LIMIT 1
`

func (q *Queries) GetLegalDocumentByID(ctx context.Context, id string) (ExtLegalpagesLegalDocument, error) {
	row := q.db.QueryRowContext(ctx, getLegalDocumentByID, id)
	var i ExtLegalpagesLegalDocument
	err := row.Scan(
		&i.ID,
		&i.DocumentType,
		&i.Title,
		&i.Content,
		&i.Version,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.CreatedBy,
	)
	return i, err
}

const getMaxVersionByType = `-- name: GetMaxVersionByType :one
SELECT CAST(COALESCE(MAX(version), 0) AS INTEGER) FROM ext_legalpages_legal_documents WHERE document_type = ?
`

func (q *Queries) GetMaxVersionByType(ctx context.Context, documentType string) (int64, error) {
	row := q.db.QueryRowContext(ctx, getMaxVersionByType, documentType)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const getPublishedDocumentByType = `-- name: GetPublishedDocumentByType :one
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents
WHERE document_type = ? AND status = 'published'
ORDER BY version DESC
LIMIT 1
`

func (q *Queries) GetPublishedDocumentByType(ctx context.Context, documentType string) (ExtLegalpagesLegalDocument, error) {
	row := q.db.QueryRowContext(ctx, getPublishedDocumentByType, documentType)
	var i ExtLegalpagesLegalDocument
	err := row.Scan(
		&i.ID,
		&i.DocumentType,
		&i.Title,
		&i.Content,
		&i.Version,
		&i.Status,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.CreatedBy,
	)
	return i, err
}

const listLegalDocuments = `-- name: ListLegalDocuments :many
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents ORDER BY document_type, version DESC
`

func (q *Queries) ListLegalDocuments(ctx context.Context) ([]ExtLegalpagesLegalDocument, error) {
	rows, err := q.db.QueryContext(ctx, listLegalDocuments)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtLegalpagesLegalDocument{}
	for rows.Next() {
		var i ExtLegalpagesLegalDocument
		if err := rows.Scan(
			&i.ID,
			&i.DocumentType,
			&i.Title,
			&i.Content,
			&i.Version,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.CreatedBy,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listLegalDocumentsByStatus = `-- name: ListLegalDocumentsByStatus :many
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents WHERE status = ? ORDER BY document_type, version DESC
`

func (q *Queries) ListLegalDocumentsByStatus(ctx context.Context, status *string) ([]ExtLegalpagesLegalDocument, error) {
	rows, err := q.db.QueryContext(ctx, listLegalDocumentsByStatus, status)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtLegalpagesLegalDocument{}
	for rows.Next() {
		var i ExtLegalpagesLegalDocument
		if err := rows.Scan(
			&i.ID,
			&i.DocumentType,
			&i.Title,
			&i.Content,
			&i.Version,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.CreatedBy,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listLegalDocumentsByType = `-- name: ListLegalDocumentsByType :many
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents WHERE document_type = ? ORDER BY version DESC
`

func (q *Queries) ListLegalDocumentsByType(ctx context.Context, documentType string) ([]ExtLegalpagesLegalDocument, error) {
	rows, err := q.db.QueryContext(ctx, listLegalDocumentsByType, documentType)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtLegalpagesLegalDocument{}
	for rows.Next() {
		var i ExtLegalpagesLegalDocument
		if err := rows.Scan(
			&i.ID,
			&i.DocumentType,
			&i.Title,
			&i.Content,
			&i.Version,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.CreatedBy,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listPublishedDocuments = `-- name: ListPublishedDocuments :many
SELECT id, document_type, title, content, version, status, created_at, updated_at, created_by FROM ext_legalpages_legal_documents WHERE status = 'published' ORDER BY document_type
`

func (q *Queries) ListPublishedDocuments(ctx context.Context) ([]ExtLegalpagesLegalDocument, error) {
	rows, err := q.db.QueryContext(ctx, listPublishedDocuments)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtLegalpagesLegalDocument{}
	for rows.Next() {
		var i ExtLegalpagesLegalDocument
		if err := rows.Scan(
			&i.ID,
			&i.DocumentType,
			&i.Title,
			&i.Content,
			&i.Version,
			&i.Status,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.CreatedBy,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateDocumentStatusByTypeAndVersion = `-- name: UpdateDocumentStatusByTypeAndVersion :exec
UPDATE ext_legalpages_legal_documents SET status = ?, updated_at = CURRENT_TIMESTAMP WHERE document_type = ? AND version = ?
`

type UpdateDocumentStatusByTypeAndVersionParams struct {
	Status       *string `json:"status"`
	DocumentType string  `json:"document_type"`
	Version      int64   `json:"version"`
}

func (q *Queries) UpdateDocumentStatusByTypeAndVersion(ctx context.Context, arg UpdateDocumentStatusByTypeAndVersionParams) error {
	_, err := q.db.ExecContext(ctx, updateDocumentStatusByTypeAndVersion, arg.Status, arg.DocumentType, arg.Version)
	return err
}

const updateLegalDocument = `-- name: UpdateLegalDocument :exec
UPDATE ext_legalpages_legal_documents SET
    title = ?,
    content = ?,
    status = ?,
    updated_at = CURRENT_TIMESTAMP
WHERE id = ?
`

type UpdateLegalDocumentParams struct {
	Title   string  `json:"title"`
	Content *string `json:"content"`
	Status  *string `json:"status"`
	ID      string  `json:"id"`
}

func (q *Queries) UpdateLegalDocument(ctx context.Context, arg UpdateLegalDocumentParams) error {
	_, err := q.db.ExecContext(ctx, updateLegalDocument,
		arg.Title,
		arg.Content,
		arg.Status,
		arg.ID,
	)
	return err
}

const updateLegalDocumentStatus = `-- name: UpdateLegalDocumentStatus :exec
UPDATE ext_legalpages_legal_documents SET status = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
`

type UpdateLegalDocumentStatusParams struct {
	Status *string `json:"status"`
	ID     string  `json:"id"`
}

func (q *Queries) UpdateLegalDocumentStatus(ctx context.Context, arg UpdateLegalDocumentStatusParams) error {
	_, err := q.db.ExecContext(ctx, updateLegalDocumentStatus, arg.Status, arg.ID)
	return err
}
