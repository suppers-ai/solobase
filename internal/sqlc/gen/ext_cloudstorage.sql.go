// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: ext_cloudstorage.sql

package db

import (
	"context"
	"encoding/json"

	"github.com/suppers-ai/solobase/internal/pkg/apptime"
)

const countStorageAccessLogsByObjectID = `-- name: CountStorageAccessLogsByObjectID :one
SELECT COUNT(*) FROM ext_cloudstorage_storage_access_logs WHERE object_id = ?
`

func (q *Queries) CountStorageAccessLogsByObjectID(ctx context.Context, objectID string) (int64, error) {
	row := q.db.QueryRowContext(ctx, countStorageAccessLogsByObjectID, objectID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createRoleQuota = `-- name: CreateRoleQuota :one

INSERT INTO ext_cloudstorage_role_quotas (
    id, role_id, role_name, max_storage_bytes, max_bandwidth_bytes,
    max_upload_size, max_files_count, allowed_extensions, blocked_extensions,
    created_at, updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, role_id, role_name, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, created_at, updated_at
`

type CreateRoleQuotaParams struct {
	ID                string  `json:"id"`
	RoleID            string  `json:"role_id"`
	RoleName          string  `json:"role_name"`
	MaxStorageBytes   int64   `json:"max_storage_bytes"`
	MaxBandwidthBytes int64   `json:"max_bandwidth_bytes"`
	MaxUploadSize     int64   `json:"max_upload_size"`
	MaxFilesCount     int64   `json:"max_files_count"`
	AllowedExtensions *string `json:"allowed_extensions"`
	BlockedExtensions *string `json:"blocked_extensions"`
	CreatedAt         string  `json:"created_at"`
	UpdatedAt         string  `json:"updated_at"`
}

// Role Quota queries
func (q *Queries) CreateRoleQuota(ctx context.Context, arg CreateRoleQuotaParams) (ExtCloudstorageRoleQuota, error) {
	row := q.db.QueryRowContext(ctx, createRoleQuota,
		arg.ID,
		arg.RoleID,
		arg.RoleName,
		arg.MaxStorageBytes,
		arg.MaxBandwidthBytes,
		arg.MaxUploadSize,
		arg.MaxFilesCount,
		arg.AllowedExtensions,
		arg.BlockedExtensions,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i ExtCloudstorageRoleQuota
	err := row.Scan(
		&i.ID,
		&i.RoleID,
		&i.RoleName,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const createStorageAccessLog = `-- name: CreateStorageAccessLog :one

INSERT INTO ext_cloudstorage_storage_access_logs (
    id, object_id, user_id, ip_address, action, user_agent, metadata, created_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, object_id, user_id, ip_address, "action", user_agent, metadata, created_at
`

type CreateStorageAccessLogParams struct {
	ID        string          `json:"id"`
	ObjectID  string          `json:"object_id"`
	UserID    *string         `json:"user_id"`
	IpAddress *string         `json:"ip_address"`
	Action    string          `json:"action"`
	UserAgent *string         `json:"user_agent"`
	Metadata  json.RawMessage `json:"metadata"`
	CreatedAt string          `json:"created_at"`
}

// Storage Access Log queries
func (q *Queries) CreateStorageAccessLog(ctx context.Context, arg CreateStorageAccessLogParams) (ExtCloudstorageStorageAccessLog, error) {
	row := q.db.QueryRowContext(ctx, createStorageAccessLog,
		arg.ID,
		arg.ObjectID,
		arg.UserID,
		arg.IpAddress,
		arg.Action,
		arg.UserAgent,
		arg.Metadata,
		arg.CreatedAt,
	)
	var i ExtCloudstorageStorageAccessLog
	err := row.Scan(
		&i.ID,
		&i.ObjectID,
		&i.UserID,
		&i.IpAddress,
		&i.Action,
		&i.UserAgent,
		&i.Metadata,
		&i.CreatedAt,
	)
	return i, err
}

const createStorageQuota = `-- name: CreateStorageQuota :one

INSERT INTO ext_cloudstorage_storage_quotas (
    id, user_id, max_storage_bytes, max_bandwidth_bytes, storage_used,
    bandwidth_used, reset_bandwidth_at, created_at, updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, user_id, max_storage_bytes, max_bandwidth_bytes, storage_used, bandwidth_used, reset_bandwidth_at, created_at, updated_at
`

type CreateStorageQuotaParams struct {
	ID                string           `json:"id"`
	UserID            string           `json:"user_id"`
	MaxStorageBytes   int64            `json:"max_storage_bytes"`
	MaxBandwidthBytes int64            `json:"max_bandwidth_bytes"`
	StorageUsed       int64            `json:"storage_used"`
	BandwidthUsed     int64            `json:"bandwidth_used"`
	ResetBandwidthAt  apptime.NullTime `json:"reset_bandwidth_at"`
	CreatedAt         string           `json:"created_at"`
	UpdatedAt         string           `json:"updated_at"`
}

// Storage Quota queries
func (q *Queries) CreateStorageQuota(ctx context.Context, arg CreateStorageQuotaParams) (ExtCloudstorageStorageQuota, error) {
	row := q.db.QueryRowContext(ctx, createStorageQuota,
		arg.ID,
		arg.UserID,
		arg.MaxStorageBytes,
		arg.MaxBandwidthBytes,
		arg.StorageUsed,
		arg.BandwidthUsed,
		arg.ResetBandwidthAt,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i ExtCloudstorageStorageQuota
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.StorageUsed,
		&i.BandwidthUsed,
		&i.ResetBandwidthAt,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const createStorageShare = `-- name: CreateStorageShare :one

INSERT INTO ext_cloudstorage_storage_shares (
    id, object_id, shared_with_user_id, shared_with_email, permission_level,
    inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at
`

type CreateStorageShareParams struct {
	ID                string           `json:"id"`
	ObjectID          string           `json:"object_id"`
	SharedWithUserID  *string          `json:"shared_with_user_id"`
	SharedWithEmail   *string          `json:"shared_with_email"`
	PermissionLevel   string           `json:"permission_level"`
	InheritToChildren int64            `json:"inherit_to_children"`
	ShareToken        *string          `json:"share_token"`
	IsPublic          int64            `json:"is_public"`
	ExpiresAt         apptime.NullTime `json:"expires_at"`
	CreatedBy         string           `json:"created_by"`
	CreatedAt         string           `json:"created_at"`
	UpdatedAt         string           `json:"updated_at"`
}

// Storage Share queries
func (q *Queries) CreateStorageShare(ctx context.Context, arg CreateStorageShareParams) (ExtCloudstorageStorageShare, error) {
	row := q.db.QueryRowContext(ctx, createStorageShare,
		arg.ID,
		arg.ObjectID,
		arg.SharedWithUserID,
		arg.SharedWithEmail,
		arg.PermissionLevel,
		arg.InheritToChildren,
		arg.ShareToken,
		arg.IsPublic,
		arg.ExpiresAt,
		arg.CreatedBy,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i ExtCloudstorageStorageShare
	err := row.Scan(
		&i.ID,
		&i.ObjectID,
		&i.SharedWithUserID,
		&i.SharedWithEmail,
		&i.PermissionLevel,
		&i.InheritToChildren,
		&i.ShareToken,
		&i.IsPublic,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const createUserQuotaOverride = `-- name: CreateUserQuotaOverride :one

INSERT INTO ext_cloudstorage_user_quota_overrides (
    id, user_id, max_storage_bytes, max_bandwidth_bytes, max_upload_size,
    max_files_count, allowed_extensions, blocked_extensions, reason, expires_at,
    created_by, created_at, updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, user_id, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, reason, expires_at, created_by, created_at, updated_at
`

type CreateUserQuotaOverrideParams struct {
	ID                string           `json:"id"`
	UserID            string           `json:"user_id"`
	MaxStorageBytes   *int64           `json:"max_storage_bytes"`
	MaxBandwidthBytes *int64           `json:"max_bandwidth_bytes"`
	MaxUploadSize     *int64           `json:"max_upload_size"`
	MaxFilesCount     *int64           `json:"max_files_count"`
	AllowedExtensions *string          `json:"allowed_extensions"`
	BlockedExtensions *string          `json:"blocked_extensions"`
	Reason            *string          `json:"reason"`
	ExpiresAt         apptime.NullTime `json:"expires_at"`
	CreatedBy         string           `json:"created_by"`
	CreatedAt         string           `json:"created_at"`
	UpdatedAt         string           `json:"updated_at"`
}

// User Quota Override queries
func (q *Queries) CreateUserQuotaOverride(ctx context.Context, arg CreateUserQuotaOverrideParams) (ExtCloudstorageUserQuotaOverride, error) {
	row := q.db.QueryRowContext(ctx, createUserQuotaOverride,
		arg.ID,
		arg.UserID,
		arg.MaxStorageBytes,
		arg.MaxBandwidthBytes,
		arg.MaxUploadSize,
		arg.MaxFilesCount,
		arg.AllowedExtensions,
		arg.BlockedExtensions,
		arg.Reason,
		arg.ExpiresAt,
		arg.CreatedBy,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i ExtCloudstorageUserQuotaOverride
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.Reason,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const decrementStorageUsed = `-- name: DecrementStorageUsed :exec
UPDATE ext_cloudstorage_storage_quotas SET
    storage_used = MAX(0, storage_used - ?),
    updated_at = ?
WHERE user_id = ?
`

type DecrementStorageUsedParams struct {
	StorageUsed int64  `json:"storage_used"`
	UpdatedAt   string `json:"updated_at"`
	UserID      string `json:"user_id"`
}

func (q *Queries) DecrementStorageUsed(ctx context.Context, arg DecrementStorageUsedParams) error {
	_, err := q.db.ExecContext(ctx, decrementStorageUsed, arg.StorageUsed, arg.UpdatedAt, arg.UserID)
	return err
}

const deleteExpiredStorageShares = `-- name: DeleteExpiredStorageShares :exec
DELETE FROM ext_cloudstorage_storage_shares WHERE expires_at IS NOT NULL AND expires_at < ?
`

func (q *Queries) DeleteExpiredStorageShares(ctx context.Context, expiresAt apptime.NullTime) error {
	_, err := q.db.ExecContext(ctx, deleteExpiredStorageShares, expiresAt)
	return err
}

const deleteExpiredUserQuotaOverrides = `-- name: DeleteExpiredUserQuotaOverrides :exec
DELETE FROM ext_cloudstorage_user_quota_overrides WHERE expires_at IS NOT NULL AND expires_at < ?
`

func (q *Queries) DeleteExpiredUserQuotaOverrides(ctx context.Context, expiresAt apptime.NullTime) error {
	_, err := q.db.ExecContext(ctx, deleteExpiredUserQuotaOverrides, expiresAt)
	return err
}

const deleteRoleQuota = `-- name: DeleteRoleQuota :exec
DELETE FROM ext_cloudstorage_role_quotas WHERE id = ?
`

func (q *Queries) DeleteRoleQuota(ctx context.Context, id string) error {
	_, err := q.db.ExecContext(ctx, deleteRoleQuota, id)
	return err
}

const deleteStorageAccessLogsOlderThan = `-- name: DeleteStorageAccessLogsOlderThan :exec
DELETE FROM ext_cloudstorage_storage_access_logs WHERE created_at < ?
`

func (q *Queries) DeleteStorageAccessLogsOlderThan(ctx context.Context, createdAt string) error {
	_, err := q.db.ExecContext(ctx, deleteStorageAccessLogsOlderThan, createdAt)
	return err
}

const deleteStorageQuota = `-- name: DeleteStorageQuota :exec
DELETE FROM ext_cloudstorage_storage_quotas WHERE id = ?
`

func (q *Queries) DeleteStorageQuota(ctx context.Context, id string) error {
	_, err := q.db.ExecContext(ctx, deleteStorageQuota, id)
	return err
}

const deleteStorageShare = `-- name: DeleteStorageShare :exec
DELETE FROM ext_cloudstorage_storage_shares WHERE id = ?
`

func (q *Queries) DeleteStorageShare(ctx context.Context, id string) error {
	_, err := q.db.ExecContext(ctx, deleteStorageShare, id)
	return err
}

const deleteStorageShareByIDAndCreator = `-- name: DeleteStorageShareByIDAndCreator :exec
DELETE FROM ext_cloudstorage_storage_shares WHERE id = ? AND created_by = ?
`

type DeleteStorageShareByIDAndCreatorParams struct {
	ID        string `json:"id"`
	CreatedBy string `json:"created_by"`
}

func (q *Queries) DeleteStorageShareByIDAndCreator(ctx context.Context, arg DeleteStorageShareByIDAndCreatorParams) error {
	_, err := q.db.ExecContext(ctx, deleteStorageShareByIDAndCreator, arg.ID, arg.CreatedBy)
	return err
}

const deleteStorageSharesByObjectID = `-- name: DeleteStorageSharesByObjectID :exec
DELETE FROM ext_cloudstorage_storage_shares WHERE object_id = ?
`

func (q *Queries) DeleteStorageSharesByObjectID(ctx context.Context, objectID string) error {
	_, err := q.db.ExecContext(ctx, deleteStorageSharesByObjectID, objectID)
	return err
}

const deleteUserQuotaOverride = `-- name: DeleteUserQuotaOverride :exec
DELETE FROM ext_cloudstorage_user_quota_overrides WHERE id = ?
`

func (q *Queries) DeleteUserQuotaOverride(ctx context.Context, id string) error {
	_, err := q.db.ExecContext(ctx, deleteUserQuotaOverride, id)
	return err
}

const getActiveUserQuotaOverride = `-- name: GetActiveUserQuotaOverride :one
SELECT id, user_id, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, reason, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_user_quota_overrides
WHERE user_id = ? AND (expires_at IS NULL OR expires_at > ?)
LIMIT 1
`

type GetActiveUserQuotaOverrideParams struct {
	UserID    string           `json:"user_id"`
	ExpiresAt apptime.NullTime `json:"expires_at"`
}

func (q *Queries) GetActiveUserQuotaOverride(ctx context.Context, arg GetActiveUserQuotaOverrideParams) (ExtCloudstorageUserQuotaOverride, error) {
	row := q.db.QueryRowContext(ctx, getActiveUserQuotaOverride, arg.UserID, arg.ExpiresAt)
	var i ExtCloudstorageUserQuotaOverride
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.Reason,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getRoleQuotaByID = `-- name: GetRoleQuotaByID :one
SELECT id, role_id, role_name, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, created_at, updated_at FROM ext_cloudstorage_role_quotas WHERE id = ? LIMIT 1
`

func (q *Queries) GetRoleQuotaByID(ctx context.Context, id string) (ExtCloudstorageRoleQuota, error) {
	row := q.db.QueryRowContext(ctx, getRoleQuotaByID, id)
	var i ExtCloudstorageRoleQuota
	err := row.Scan(
		&i.ID,
		&i.RoleID,
		&i.RoleName,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getRoleQuotaByRoleID = `-- name: GetRoleQuotaByRoleID :one
SELECT id, role_id, role_name, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, created_at, updated_at FROM ext_cloudstorage_role_quotas WHERE role_id = ? LIMIT 1
`

func (q *Queries) GetRoleQuotaByRoleID(ctx context.Context, roleID string) (ExtCloudstorageRoleQuota, error) {
	row := q.db.QueryRowContext(ctx, getRoleQuotaByRoleID, roleID)
	var i ExtCloudstorageRoleQuota
	err := row.Scan(
		&i.ID,
		&i.RoleID,
		&i.RoleName,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getRoleQuotaByRoleName = `-- name: GetRoleQuotaByRoleName :one
SELECT id, role_id, role_name, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, created_at, updated_at FROM ext_cloudstorage_role_quotas WHERE role_name = ? LIMIT 1
`

func (q *Queries) GetRoleQuotaByRoleName(ctx context.Context, roleName string) (ExtCloudstorageRoleQuota, error) {
	row := q.db.QueryRowContext(ctx, getRoleQuotaByRoleName, roleName)
	var i ExtCloudstorageRoleQuota
	err := row.Scan(
		&i.ID,
		&i.RoleID,
		&i.RoleName,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getStorageQuotaByID = `-- name: GetStorageQuotaByID :one
SELECT id, user_id, max_storage_bytes, max_bandwidth_bytes, storage_used, bandwidth_used, reset_bandwidth_at, created_at, updated_at FROM ext_cloudstorage_storage_quotas WHERE id = ? LIMIT 1
`

func (q *Queries) GetStorageQuotaByID(ctx context.Context, id string) (ExtCloudstorageStorageQuota, error) {
	row := q.db.QueryRowContext(ctx, getStorageQuotaByID, id)
	var i ExtCloudstorageStorageQuota
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.StorageUsed,
		&i.BandwidthUsed,
		&i.ResetBandwidthAt,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getStorageQuotaByUserID = `-- name: GetStorageQuotaByUserID :one
SELECT id, user_id, max_storage_bytes, max_bandwidth_bytes, storage_used, bandwidth_used, reset_bandwidth_at, created_at, updated_at FROM ext_cloudstorage_storage_quotas WHERE user_id = ? LIMIT 1
`

func (q *Queries) GetStorageQuotaByUserID(ctx context.Context, userID string) (ExtCloudstorageStorageQuota, error) {
	row := q.db.QueryRowContext(ctx, getStorageQuotaByUserID, userID)
	var i ExtCloudstorageStorageQuota
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.StorageUsed,
		&i.BandwidthUsed,
		&i.ResetBandwidthAt,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getStorageShareByID = `-- name: GetStorageShareByID :one
SELECT id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_storage_shares WHERE id = ? LIMIT 1
`

func (q *Queries) GetStorageShareByID(ctx context.Context, id string) (ExtCloudstorageStorageShare, error) {
	row := q.db.QueryRowContext(ctx, getStorageShareByID, id)
	var i ExtCloudstorageStorageShare
	err := row.Scan(
		&i.ID,
		&i.ObjectID,
		&i.SharedWithUserID,
		&i.SharedWithEmail,
		&i.PermissionLevel,
		&i.InheritToChildren,
		&i.ShareToken,
		&i.IsPublic,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getStorageShareByIDAndCreator = `-- name: GetStorageShareByIDAndCreator :one
SELECT id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_storage_shares WHERE id = ? AND created_by = ? LIMIT 1
`

type GetStorageShareByIDAndCreatorParams struct {
	ID        string `json:"id"`
	CreatedBy string `json:"created_by"`
}

func (q *Queries) GetStorageShareByIDAndCreator(ctx context.Context, arg GetStorageShareByIDAndCreatorParams) (ExtCloudstorageStorageShare, error) {
	row := q.db.QueryRowContext(ctx, getStorageShareByIDAndCreator, arg.ID, arg.CreatedBy)
	var i ExtCloudstorageStorageShare
	err := row.Scan(
		&i.ID,
		&i.ObjectID,
		&i.SharedWithUserID,
		&i.SharedWithEmail,
		&i.PermissionLevel,
		&i.InheritToChildren,
		&i.ShareToken,
		&i.IsPublic,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getStorageShareByToken = `-- name: GetStorageShareByToken :one
SELECT id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_storage_shares WHERE share_token = ? LIMIT 1
`

func (q *Queries) GetStorageShareByToken(ctx context.Context, shareToken *string) (ExtCloudstorageStorageShare, error) {
	row := q.db.QueryRowContext(ctx, getStorageShareByToken, shareToken)
	var i ExtCloudstorageStorageShare
	err := row.Scan(
		&i.ID,
		&i.ObjectID,
		&i.SharedWithUserID,
		&i.SharedWithEmail,
		&i.PermissionLevel,
		&i.InheritToChildren,
		&i.ShareToken,
		&i.IsPublic,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getUserQuotaOverrideByID = `-- name: GetUserQuotaOverrideByID :one
SELECT id, user_id, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, reason, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_user_quota_overrides WHERE id = ? LIMIT 1
`

func (q *Queries) GetUserQuotaOverrideByID(ctx context.Context, id string) (ExtCloudstorageUserQuotaOverride, error) {
	row := q.db.QueryRowContext(ctx, getUserQuotaOverrideByID, id)
	var i ExtCloudstorageUserQuotaOverride
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.Reason,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getUserQuotaOverrideByUserID = `-- name: GetUserQuotaOverrideByUserID :one
SELECT id, user_id, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, reason, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_user_quota_overrides WHERE user_id = ? LIMIT 1
`

func (q *Queries) GetUserQuotaOverrideByUserID(ctx context.Context, userID string) (ExtCloudstorageUserQuotaOverride, error) {
	row := q.db.QueryRowContext(ctx, getUserQuotaOverrideByUserID, userID)
	var i ExtCloudstorageUserQuotaOverride
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.MaxStorageBytes,
		&i.MaxBandwidthBytes,
		&i.MaxUploadSize,
		&i.MaxFilesCount,
		&i.AllowedExtensions,
		&i.BlockedExtensions,
		&i.Reason,
		&i.ExpiresAt,
		&i.CreatedBy,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const incrementBandwidthUsed = `-- name: IncrementBandwidthUsed :exec
UPDATE ext_cloudstorage_storage_quotas SET
    bandwidth_used = bandwidth_used + ?,
    updated_at = ?
WHERE user_id = ?
`

type IncrementBandwidthUsedParams struct {
	BandwidthUsed int64  `json:"bandwidth_used"`
	UpdatedAt     string `json:"updated_at"`
	UserID        string `json:"user_id"`
}

func (q *Queries) IncrementBandwidthUsed(ctx context.Context, arg IncrementBandwidthUsedParams) error {
	_, err := q.db.ExecContext(ctx, incrementBandwidthUsed, arg.BandwidthUsed, arg.UpdatedAt, arg.UserID)
	return err
}

const incrementStorageUsed = `-- name: IncrementStorageUsed :exec
UPDATE ext_cloudstorage_storage_quotas SET
    storage_used = storage_used + ?,
    updated_at = ?
WHERE user_id = ?
`

type IncrementStorageUsedParams struct {
	StorageUsed int64  `json:"storage_used"`
	UpdatedAt   string `json:"updated_at"`
	UserID      string `json:"user_id"`
}

func (q *Queries) IncrementStorageUsed(ctx context.Context, arg IncrementStorageUsedParams) error {
	_, err := q.db.ExecContext(ctx, incrementStorageUsed, arg.StorageUsed, arg.UpdatedAt, arg.UserID)
	return err
}

const listActiveUserQuotaOverrides = `-- name: ListActiveUserQuotaOverrides :many
SELECT id, user_id, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, reason, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_user_quota_overrides
WHERE expires_at IS NULL OR expires_at > ?
ORDER BY created_at DESC
`

func (q *Queries) ListActiveUserQuotaOverrides(ctx context.Context, expiresAt apptime.NullTime) ([]ExtCloudstorageUserQuotaOverride, error) {
	rows, err := q.db.QueryContext(ctx, listActiveUserQuotaOverrides, expiresAt)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageUserQuotaOverride{}
	for rows.Next() {
		var i ExtCloudstorageUserQuotaOverride
		if err := rows.Scan(
			&i.ID,
			&i.UserID,
			&i.MaxStorageBytes,
			&i.MaxBandwidthBytes,
			&i.MaxUploadSize,
			&i.MaxFilesCount,
			&i.AllowedExtensions,
			&i.BlockedExtensions,
			&i.Reason,
			&i.ExpiresAt,
			&i.CreatedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listPublicStorageShares = `-- name: ListPublicStorageShares :many
SELECT id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_storage_shares WHERE is_public = 1 ORDER BY created_at DESC
`

func (q *Queries) ListPublicStorageShares(ctx context.Context) ([]ExtCloudstorageStorageShare, error) {
	rows, err := q.db.QueryContext(ctx, listPublicStorageShares)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageStorageShare{}
	for rows.Next() {
		var i ExtCloudstorageStorageShare
		if err := rows.Scan(
			&i.ID,
			&i.ObjectID,
			&i.SharedWithUserID,
			&i.SharedWithEmail,
			&i.PermissionLevel,
			&i.InheritToChildren,
			&i.ShareToken,
			&i.IsPublic,
			&i.ExpiresAt,
			&i.CreatedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listRoleQuotas = `-- name: ListRoleQuotas :many
SELECT id, role_id, role_name, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, created_at, updated_at FROM ext_cloudstorage_role_quotas ORDER BY role_name
`

func (q *Queries) ListRoleQuotas(ctx context.Context) ([]ExtCloudstorageRoleQuota, error) {
	rows, err := q.db.QueryContext(ctx, listRoleQuotas)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageRoleQuota{}
	for rows.Next() {
		var i ExtCloudstorageRoleQuota
		if err := rows.Scan(
			&i.ID,
			&i.RoleID,
			&i.RoleName,
			&i.MaxStorageBytes,
			&i.MaxBandwidthBytes,
			&i.MaxUploadSize,
			&i.MaxFilesCount,
			&i.AllowedExtensions,
			&i.BlockedExtensions,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listStorageAccessLogsByObjectID = `-- name: ListStorageAccessLogsByObjectID :many
SELECT id, object_id, user_id, ip_address, "action", user_agent, metadata, created_at FROM ext_cloudstorage_storage_access_logs WHERE object_id = ? ORDER BY created_at DESC LIMIT ? OFFSET ?
`

type ListStorageAccessLogsByObjectIDParams struct {
	ObjectID string `json:"object_id"`
	Limit    int64  `json:"limit"`
	Offset   int64  `json:"offset"`
}

func (q *Queries) ListStorageAccessLogsByObjectID(ctx context.Context, arg ListStorageAccessLogsByObjectIDParams) ([]ExtCloudstorageStorageAccessLog, error) {
	rows, err := q.db.QueryContext(ctx, listStorageAccessLogsByObjectID, arg.ObjectID, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageStorageAccessLog{}
	for rows.Next() {
		var i ExtCloudstorageStorageAccessLog
		if err := rows.Scan(
			&i.ID,
			&i.ObjectID,
			&i.UserID,
			&i.IpAddress,
			&i.Action,
			&i.UserAgent,
			&i.Metadata,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listStorageAccessLogsByUserID = `-- name: ListStorageAccessLogsByUserID :many
SELECT id, object_id, user_id, ip_address, "action", user_agent, metadata, created_at FROM ext_cloudstorage_storage_access_logs WHERE user_id = ? ORDER BY created_at DESC LIMIT ? OFFSET ?
`

type ListStorageAccessLogsByUserIDParams struct {
	UserID *string `json:"user_id"`
	Limit  int64   `json:"limit"`
	Offset int64   `json:"offset"`
}

func (q *Queries) ListStorageAccessLogsByUserID(ctx context.Context, arg ListStorageAccessLogsByUserIDParams) ([]ExtCloudstorageStorageAccessLog, error) {
	rows, err := q.db.QueryContext(ctx, listStorageAccessLogsByUserID, arg.UserID, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageStorageAccessLog{}
	for rows.Next() {
		var i ExtCloudstorageStorageAccessLog
		if err := rows.Scan(
			&i.ID,
			&i.ObjectID,
			&i.UserID,
			&i.IpAddress,
			&i.Action,
			&i.UserAgent,
			&i.Metadata,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listStorageSharesByCreatedBy = `-- name: ListStorageSharesByCreatedBy :many
SELECT id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_storage_shares WHERE created_by = ? ORDER BY created_at DESC
`

func (q *Queries) ListStorageSharesByCreatedBy(ctx context.Context, createdBy string) ([]ExtCloudstorageStorageShare, error) {
	rows, err := q.db.QueryContext(ctx, listStorageSharesByCreatedBy, createdBy)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageStorageShare{}
	for rows.Next() {
		var i ExtCloudstorageStorageShare
		if err := rows.Scan(
			&i.ID,
			&i.ObjectID,
			&i.SharedWithUserID,
			&i.SharedWithEmail,
			&i.PermissionLevel,
			&i.InheritToChildren,
			&i.ShareToken,
			&i.IsPublic,
			&i.ExpiresAt,
			&i.CreatedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listStorageSharesByObjectID = `-- name: ListStorageSharesByObjectID :many
SELECT id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_storage_shares WHERE object_id = ? ORDER BY created_at DESC
`

func (q *Queries) ListStorageSharesByObjectID(ctx context.Context, objectID string) ([]ExtCloudstorageStorageShare, error) {
	rows, err := q.db.QueryContext(ctx, listStorageSharesByObjectID, objectID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageStorageShare{}
	for rows.Next() {
		var i ExtCloudstorageStorageShare
		if err := rows.Scan(
			&i.ID,
			&i.ObjectID,
			&i.SharedWithUserID,
			&i.SharedWithEmail,
			&i.PermissionLevel,
			&i.InheritToChildren,
			&i.ShareToken,
			&i.IsPublic,
			&i.ExpiresAt,
			&i.CreatedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listStorageSharesByUserID = `-- name: ListStorageSharesByUserID :many
SELECT id, object_id, shared_with_user_id, shared_with_email, permission_level, inherit_to_children, share_token, is_public, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_storage_shares WHERE shared_with_user_id = ? ORDER BY created_at DESC
`

func (q *Queries) ListStorageSharesByUserID(ctx context.Context, sharedWithUserID *string) ([]ExtCloudstorageStorageShare, error) {
	rows, err := q.db.QueryContext(ctx, listStorageSharesByUserID, sharedWithUserID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageStorageShare{}
	for rows.Next() {
		var i ExtCloudstorageStorageShare
		if err := rows.Scan(
			&i.ID,
			&i.ObjectID,
			&i.SharedWithUserID,
			&i.SharedWithEmail,
			&i.PermissionLevel,
			&i.InheritToChildren,
			&i.ShareToken,
			&i.IsPublic,
			&i.ExpiresAt,
			&i.CreatedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listUserQuotaOverrides = `-- name: ListUserQuotaOverrides :many
SELECT id, user_id, max_storage_bytes, max_bandwidth_bytes, max_upload_size, max_files_count, allowed_extensions, blocked_extensions, reason, expires_at, created_by, created_at, updated_at FROM ext_cloudstorage_user_quota_overrides ORDER BY created_at DESC
`

func (q *Queries) ListUserQuotaOverrides(ctx context.Context) ([]ExtCloudstorageUserQuotaOverride, error) {
	rows, err := q.db.QueryContext(ctx, listUserQuotaOverrides)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ExtCloudstorageUserQuotaOverride{}
	for rows.Next() {
		var i ExtCloudstorageUserQuotaOverride
		if err := rows.Scan(
			&i.ID,
			&i.UserID,
			&i.MaxStorageBytes,
			&i.MaxBandwidthBytes,
			&i.MaxUploadSize,
			&i.MaxFilesCount,
			&i.AllowedExtensions,
			&i.BlockedExtensions,
			&i.Reason,
			&i.ExpiresAt,
			&i.CreatedBy,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const resetAllBandwidthUsage = `-- name: ResetAllBandwidthUsage :exec
UPDATE ext_cloudstorage_storage_quotas SET
    bandwidth_used = 0,
    reset_bandwidth_at = ?,
    updated_at = ?
WHERE reset_bandwidth_at IS NULL OR reset_bandwidth_at < ?
`

type ResetAllBandwidthUsageParams struct {
	ResetBandwidthAt   apptime.NullTime `json:"reset_bandwidth_at"`
	UpdatedAt          string           `json:"updated_at"`
	ResetBandwidthAt_2 apptime.NullTime `json:"reset_bandwidth_at_2"`
}

func (q *Queries) ResetAllBandwidthUsage(ctx context.Context, arg ResetAllBandwidthUsageParams) error {
	_, err := q.db.ExecContext(ctx, resetAllBandwidthUsage, arg.ResetBandwidthAt, arg.UpdatedAt, arg.ResetBandwidthAt_2)
	return err
}

const resetBandwidthUsage = `-- name: ResetBandwidthUsage :exec
UPDATE ext_cloudstorage_storage_quotas SET
    bandwidth_used = 0,
    reset_bandwidth_at = ?,
    updated_at = ?
WHERE user_id = ?
`

type ResetBandwidthUsageParams struct {
	ResetBandwidthAt apptime.NullTime `json:"reset_bandwidth_at"`
	UpdatedAt        string           `json:"updated_at"`
	UserID           string           `json:"user_id"`
}

func (q *Queries) ResetBandwidthUsage(ctx context.Context, arg ResetBandwidthUsageParams) error {
	_, err := q.db.ExecContext(ctx, resetBandwidthUsage, arg.ResetBandwidthAt, arg.UpdatedAt, arg.UserID)
	return err
}

const updateRoleQuota = `-- name: UpdateRoleQuota :exec
UPDATE ext_cloudstorage_role_quotas SET
    role_name = ?,
    max_storage_bytes = ?,
    max_bandwidth_bytes = ?,
    max_upload_size = ?,
    max_files_count = ?,
    allowed_extensions = ?,
    blocked_extensions = ?,
    updated_at = ?
WHERE id = ?
`

type UpdateRoleQuotaParams struct {
	RoleName          string  `json:"role_name"`
	MaxStorageBytes   int64   `json:"max_storage_bytes"`
	MaxBandwidthBytes int64   `json:"max_bandwidth_bytes"`
	MaxUploadSize     int64   `json:"max_upload_size"`
	MaxFilesCount     int64   `json:"max_files_count"`
	AllowedExtensions *string `json:"allowed_extensions"`
	BlockedExtensions *string `json:"blocked_extensions"`
	UpdatedAt         string  `json:"updated_at"`
	ID                string  `json:"id"`
}

func (q *Queries) UpdateRoleQuota(ctx context.Context, arg UpdateRoleQuotaParams) error {
	_, err := q.db.ExecContext(ctx, updateRoleQuota,
		arg.RoleName,
		arg.MaxStorageBytes,
		arg.MaxBandwidthBytes,
		arg.MaxUploadSize,
		arg.MaxFilesCount,
		arg.AllowedExtensions,
		arg.BlockedExtensions,
		arg.UpdatedAt,
		arg.ID,
	)
	return err
}

const updateStorageQuotaUsage = `-- name: UpdateStorageQuotaUsage :exec
UPDATE ext_cloudstorage_storage_quotas SET
    storage_used = ?,
    bandwidth_used = ?,
    updated_at = ?
WHERE user_id = ?
`

type UpdateStorageQuotaUsageParams struct {
	StorageUsed   int64  `json:"storage_used"`
	BandwidthUsed int64  `json:"bandwidth_used"`
	UpdatedAt     string `json:"updated_at"`
	UserID        string `json:"user_id"`
}

func (q *Queries) UpdateStorageQuotaUsage(ctx context.Context, arg UpdateStorageQuotaUsageParams) error {
	_, err := q.db.ExecContext(ctx, updateStorageQuotaUsage,
		arg.StorageUsed,
		arg.BandwidthUsed,
		arg.UpdatedAt,
		arg.UserID,
	)
	return err
}

const updateStorageShare = `-- name: UpdateStorageShare :exec
UPDATE ext_cloudstorage_storage_shares SET
    permission_level = ?,
    inherit_to_children = ?,
    is_public = ?,
    expires_at = ?,
    updated_at = ?
WHERE id = ?
`

type UpdateStorageShareParams struct {
	PermissionLevel   string           `json:"permission_level"`
	InheritToChildren int64            `json:"inherit_to_children"`
	IsPublic          int64            `json:"is_public"`
	ExpiresAt         apptime.NullTime `json:"expires_at"`
	UpdatedAt         string           `json:"updated_at"`
	ID                string           `json:"id"`
}

func (q *Queries) UpdateStorageShare(ctx context.Context, arg UpdateStorageShareParams) error {
	_, err := q.db.ExecContext(ctx, updateStorageShare,
		arg.PermissionLevel,
		arg.InheritToChildren,
		arg.IsPublic,
		arg.ExpiresAt,
		arg.UpdatedAt,
		arg.ID,
	)
	return err
}

const updateUserQuotaOverride = `-- name: UpdateUserQuotaOverride :exec
UPDATE ext_cloudstorage_user_quota_overrides SET
    max_storage_bytes = ?,
    max_bandwidth_bytes = ?,
    max_upload_size = ?,
    max_files_count = ?,
    allowed_extensions = ?,
    blocked_extensions = ?,
    reason = ?,
    expires_at = ?,
    updated_at = ?
WHERE id = ?
`

type UpdateUserQuotaOverrideParams struct {
	MaxStorageBytes   *int64           `json:"max_storage_bytes"`
	MaxBandwidthBytes *int64           `json:"max_bandwidth_bytes"`
	MaxUploadSize     *int64           `json:"max_upload_size"`
	MaxFilesCount     *int64           `json:"max_files_count"`
	AllowedExtensions *string          `json:"allowed_extensions"`
	BlockedExtensions *string          `json:"blocked_extensions"`
	Reason            *string          `json:"reason"`
	ExpiresAt         apptime.NullTime `json:"expires_at"`
	UpdatedAt         string           `json:"updated_at"`
	ID                string           `json:"id"`
}

func (q *Queries) UpdateUserQuotaOverride(ctx context.Context, arg UpdateUserQuotaOverrideParams) error {
	_, err := q.db.ExecContext(ctx, updateUserQuotaOverride,
		arg.MaxStorageBytes,
		arg.MaxBandwidthBytes,
		arg.MaxUploadSize,
		arg.MaxFilesCount,
		arg.AllowedExtensions,
		arg.BlockedExtensions,
		arg.Reason,
		arg.ExpiresAt,
		arg.UpdatedAt,
		arg.ID,
	)
	return err
}

const upsertStorageQuota = `-- name: UpsertStorageQuota :exec
INSERT INTO ext_cloudstorage_storage_quotas (
    id, user_id, max_storage_bytes, max_bandwidth_bytes, storage_used,
    bandwidth_used, reset_bandwidth_at, created_at, updated_at
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
ON CONFLICT(user_id) DO UPDATE SET
    max_storage_bytes = excluded.max_storage_bytes,
    max_bandwidth_bytes = excluded.max_bandwidth_bytes,
    updated_at = excluded.updated_at
`

type UpsertStorageQuotaParams struct {
	ID                string           `json:"id"`
	UserID            string           `json:"user_id"`
	MaxStorageBytes   int64            `json:"max_storage_bytes"`
	MaxBandwidthBytes int64            `json:"max_bandwidth_bytes"`
	StorageUsed       int64            `json:"storage_used"`
	BandwidthUsed     int64            `json:"bandwidth_used"`
	ResetBandwidthAt  apptime.NullTime `json:"reset_bandwidth_at"`
	CreatedAt         string           `json:"created_at"`
	UpdatedAt         string           `json:"updated_at"`
}

func (q *Queries) UpsertStorageQuota(ctx context.Context, arg UpsertStorageQuotaParams) error {
	_, err := q.db.ExecContext(ctx, upsertStorageQuota,
		arg.ID,
		arg.UserID,
		arg.MaxStorageBytes,
		arg.MaxBandwidthBytes,
		arg.StorageUsed,
		arg.BandwidthUsed,
		arg.ResetBandwidthAt,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	return err
}
